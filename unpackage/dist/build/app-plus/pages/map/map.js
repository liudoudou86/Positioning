"use weex:vue";

if (typeof Promise !== 'undefined' && !Promise.prototype.finally) {
  Promise.prototype.finally = function(callback) {
    const promise = this.constructor
    return this.then(
      value => promise.resolve(callback()).then(() => value),
      reason => promise.resolve(callback()).then(() => {
        throw reason
      })
    )
  }
};

if (typeof uni !== 'undefined' && uni && uni.requireGlobal) {
  const global = uni.requireGlobal()
  ArrayBuffer = global.ArrayBuffer
  Int8Array = global.Int8Array
  Uint8Array = global.Uint8Array
  Uint8ClampedArray = global.Uint8ClampedArray
  Int16Array = global.Int16Array
  Uint16Array = global.Uint16Array
  Int32Array = global.Int32Array
  Uint32Array = global.Uint32Array
  Float32Array = global.Float32Array
  Float64Array = global.Float64Array
  BigInt64Array = global.BigInt64Array
  BigUint64Array = global.BigUint64Array
};


(()=>{var ln=Object.create;var ut=Object.defineProperty;var dn=Object.getOwnPropertyDescriptor;var hn=Object.getOwnPropertyNames;var fn=Object.getPrototypeOf,mn=Object.prototype.hasOwnProperty;var gn=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var pn=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of hn(e))!mn.call(n,o)&&o!==t&&ut(n,o,{get:()=>e[o],enumerable:!(i=dn(e,o))||i.enumerable});return n};var _n=(n,e,t)=>(t=n!=null?ln(fn(n)):{},pn(e||!n||!n.__esModule?ut(t,"default",{value:n,enumerable:!0}):t,n));var I=(n,e,t)=>new Promise((i,o)=>{var s=l=>{try{c(t.next(l))}catch(r){o(r)}},a=l=>{try{c(t.throw(l))}catch(r){o(r)}},c=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,a);c((t=t.apply(n,e)).next())});var un=gn((Fo,cn)=>{cn.exports=Vue});var yn=Object.defineProperty,wn=Object.defineProperties,bn=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,An=Object.prototype.hasOwnProperty,vn=Object.prototype.propertyIsEnumerable,dt=(n,e,t)=>e in n?yn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||(e={}))An.call(e,t)&&dt(n,t,e[t]);if(lt)for(var t of lt(e))vn.call(e,t)&&dt(n,t,e[t]);return n},ae=(n,e)=>wn(n,bn(e)),Pt=n=>typeof n=="string",kn=Object.prototype.toString,Ot=n=>kn.call(n),Lt=n=>Ot(n).slice(8,-1);function Fn(){return typeof __channelId__=="string"&&__channelId__}function Sn(n,e){switch(Lt(e)){case"Function":return"function() { [native code] }";default:return e}}function En(n,e,t){return Fn()?(t.push(e.replace("at ","uni-app:///")),console[n].apply(console,t)):t.map(function(o){let s=Ot(o).toLowerCase();if(["[object object]","[object array]","[object module]"].indexOf(s)!==-1)try{o="---BEGIN:JSON---"+JSON.stringify(o,Sn)+"---END:JSON---"}catch(a){o=s}else if(o===null)o="---NULL---";else if(o===void 0)o="---UNDEFINED---";else{let a=Lt(o).toUpperCase();a==="NUMBER"||a==="BOOLEAN"?o="---BEGIN:"+a+"---"+o+"---END:"+a+"---":o=String(o)}return o}).join("---COMMA---")+" "+e}function B(n,e,...t){let i=En(n,e,t);i&&console[n](i)}var Tn=n=>n!==null&&typeof n=="object",Cn=["{","}"],He=class{constructor(){this._caches=Object.create(null)}interpolate(e,t,i=Cn){if(!t)return[e];let o=this._caches[e];return o||(o=xn(e,i),this._caches[e]=o),Pn(o,t)}},In=/^(?:\d)+/,Dn=/^(?:\w)+/;function xn(n,[e,t]){let i=[],o=0,s="";for(;o<n.length;){let a=n[o++];if(a===e){s&&i.push({type:"text",value:s}),s="";let c="";for(a=n[o++];a!==void 0&&a!==t;)c+=a,a=n[o++];let l=a===t,r=In.test(c)?"list":l&&Dn.test(c)?"named":"unknown";i.push({value:c,type:r})}else s+=a}return s&&i.push({type:"text",value:s}),i}function Pn(n,e){let t=[],i=0,o=Array.isArray(e)?"list":Tn(e)?"named":"unknown";if(o==="unknown")return t;for(;i<n.length;){let s=n[i];switch(s.type){case"text":t.push(s.value);break;case"list":t.push(e[parseInt(s.value,10)]);break;case"named":o==="named"&&t.push(e[s.value]);break}i++}return t}var qe="zh-Hans",ht="zh-Hant",X="en",On="fr",Ln="es",Bn=Object.prototype.hasOwnProperty,ft=(n,e)=>Bn.call(n,e),Rn=new He;function Un(n,e){return!!e.find(t=>n.indexOf(t)!==-1)}function Nn(n,e){return e.find(t=>n.indexOf(t)===0)}function mt(n,e){if(!n)return;if(n=n.trim().replace(/_/g,"-"),e&&e[n])return n;if(n=n.toLowerCase(),n==="chinese")return qe;if(n.indexOf("zh")===0)return n.indexOf("-hans")>-1?qe:n.indexOf("-hant")>-1||Un(n,["-tw","-hk","-mo","-cht"])?ht:qe;let t=Nn(n,[X,On,Ln]);if(t)return t}var Ve=class{constructor({locale:e,fallbackLocale:t,messages:i,watcher:o,formater:s}){this.locale=X,this.fallbackLocale=X,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=s||Rn,this.messages=i||{},this.setLocale(e||X),o&&this.watchLocale(o)}setLocale(e){let t=this.locale;this.locale=mt(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach(i=>{i(this.locale,t)})}getLocale(){return this.locale}watchLocale(e){let t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,i=!0){let o=this.messages[e];o?i?Object.assign(o,t):Object.keys(t).forEach(s=>{ft(o,s)||(o[s]=t[s])}):this.messages[e]=t}f(e,t,i){return this.formater.interpolate(e,t,i).join("")}t(e,t,i){let o=this.message;return typeof t=="string"?(t=mt(t,this.messages),t&&(o=this.messages[t])):i=t,ft(o,e)?this.formater.interpolate(o[e],i).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}};function qn(n,e){n.$watchLocale?n.$watchLocale(t=>{e.setLocale(t)}):n.$watch(()=>n.$locale,t=>{e.setLocale(t)})}function jn(){return typeof uni!="undefined"&&uni.getLocale?uni.getLocale():typeof global!="undefined"&&global.getLocale?global.getLocale():X}function Mn(n,e={},t,i){typeof n!="string"&&([n,e]=[e,n]),typeof n!="string"&&(n=jn()),typeof t!="string"&&(t=typeof __uniConfig!="undefined"&&__uniConfig.fallbackLocale||X);let o=new Ve({locale:n,fallbackLocale:t,messages:e,watcher:i}),s=(a,c)=>{if(typeof getApp!="function")s=function(l,r){return o.t(l,r)};else{let l=!1;s=function(r,f){let w=getApp().$vm;return w&&(w.$locale,l||(l=!0,qn(w,o))),o.t(r,f)}}return s(a,c)};return{i18n:o,f(a,c,l){return o.f(a,c,l)},t(a,c){return s(a,c)},add(a,c,l=!0){return o.add(a,c,l)},watch(a){return o.watchLocale(a)},getLocale(){return o.getLocale()},setLocale(a){return o.setLocale(a)}}}var $n=[{path:"pages/index/index",style:{navigationBarTitleText:"\u5B9E\u65F6\u5B9A\u4F4D"}},{path:"pages/map/map",style:{navigationBarTitleText:"\u5386\u53F2\u8DB3\u8FF9"}},{path:"pages/setting/setting",style:{navigationBarTitleText:"\u7528\u6237\u8BBE\u7F6E"}},{path:"pages/setting/confirm/confirm",style:{navigationBarTitleText:"\u67E5\u770B\u7528\u6237"}},{path:"pages/setting/register/register",style:{navigationBarTitleText:"\u6CE8\u518C\u7528\u6237"}}],Kn={navigationBarTextStyle:"black",navigationBarTitleText:"uni-app",navigationBarBackgroundColor:"#F8F8F8",backgroundColor:"#F8F8F8"},zn={color:"#7A7E83",selectedColor:"#007AFF",borderStyle:"black",backgroundColor:"#F8F8F8",list:[{pagePath:"pages/index/index",iconPath:"static/icons/component.png",selectedIconPath:"static/icons/componentHL.png",text:"\u5B9A\u4F4D"},{pagePath:"pages/map/map",iconPath:"static/icons/extui.png",selectedIconPath:"static/icons/extuiHL.png",text:"\u8DB3\u8FF9"},{pagePath:"pages/setting/setting",iconPath:"static/icons/template.png",selectedIconPath:"static/icons/templateHL.png",text:"\u8BBE\u7F6E"}]},Bt={pages:$n,globalStyle:Kn,tabBar:zn};function Wn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function ie(n,e,t){return n(t={path:e,exports:{},require:function(i,o){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(o==null&&t.path)}},t.exports),t.exports}var je=ie(function(n,e){var t;n.exports=(t=t||function(i,o){var s=Object.create||function(){function u(){}return function(h){var F;return u.prototype=h,F=new u,u.prototype=null,F}}(),a={},c=a.lib={},l=c.Base={extend:function(u){var h=s(this);return u&&h.mixIn(u),h.hasOwnProperty("init")&&this.init!==h.init||(h.init=function(){h.$super.init.apply(this,arguments)}),h.init.prototype=h,h.$super=this,h},create:function(){var u=this.extend();return u.init.apply(u,arguments),u},init:function(){},mixIn:function(u){for(var h in u)u.hasOwnProperty(h)&&(this[h]=u[h]);u.hasOwnProperty("toString")&&(this.toString=u.toString)},clone:function(){return this.init.prototype.extend(this)}},r=c.WordArray=l.extend({init:function(u,h){u=this.words=u||[],this.sigBytes=h!=o?h:4*u.length},toString:function(u){return(u||w).stringify(this)},concat:function(u){var h=this.words,F=u.words,k=this.sigBytes,b=u.sigBytes;if(this.clamp(),k%4)for(var S=0;S<b;S++){var T=F[S>>>2]>>>24-S%4*8&255;h[k+S>>>2]|=T<<24-(k+S)%4*8}else for(S=0;S<b;S+=4)h[k+S>>>2]=F[S>>>2];return this.sigBytes+=b,this},clamp:function(){var u=this.words,h=this.sigBytes;u[h>>>2]&=4294967295<<32-h%4*8,u.length=i.ceil(h/4)},clone:function(){var u=l.clone.call(this);return u.words=this.words.slice(0),u},random:function(u){for(var h,F=[],k=function(T){T=T;var x=987654321,D=4294967295;return function(){var z=((x=36969*(65535&x)+(x>>16)&D)<<16)+(T=18e3*(65535&T)+(T>>16)&D)&D;return z/=4294967296,(z+=.5)*(i.random()>.5?1:-1)}},b=0;b<u;b+=4){var S=k(4294967296*(h||i.random()));h=987654071*S(),F.push(4294967296*S()|0)}return new r.init(F,u)}}),f=a.enc={},w=f.Hex={stringify:function(u){for(var h=u.words,F=u.sigBytes,k=[],b=0;b<F;b++){var S=h[b>>>2]>>>24-b%4*8&255;k.push((S>>>4).toString(16)),k.push((15&S).toString(16))}return k.join("")},parse:function(u){for(var h=u.length,F=[],k=0;k<h;k+=2)F[k>>>3]|=parseInt(u.substr(k,2),16)<<24-k%8*4;return new r.init(F,h/2)}},A=f.Latin1={stringify:function(u){for(var h=u.words,F=u.sigBytes,k=[],b=0;b<F;b++){var S=h[b>>>2]>>>24-b%4*8&255;k.push(String.fromCharCode(S))}return k.join("")},parse:function(u){for(var h=u.length,F=[],k=0;k<h;k++)F[k>>>2]|=(255&u.charCodeAt(k))<<24-k%4*8;return new r.init(F,h)}},v=f.Utf8={stringify:function(u){try{return decodeURIComponent(escape(A.stringify(u)))}catch(h){throw new Error("Malformed UTF-8 data")}},parse:function(u){return A.parse(unescape(encodeURIComponent(u)))}},E=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(u){typeof u=="string"&&(u=v.parse(u)),this._data.concat(u),this._nDataBytes+=u.sigBytes},_process:function(u){var h=this._data,F=h.words,k=h.sigBytes,b=this.blockSize,S=k/(4*b),T=(S=u?i.ceil(S):i.max((0|S)-this._minBufferSize,0))*b,x=i.min(4*T,k);if(T){for(var D=0;D<T;D+=b)this._doProcessBlock(F,D);var z=F.splice(0,T);h.sigBytes-=x}return new r.init(z,x)},clone:function(){var u=l.clone.call(this);return u._data=this._data.clone(),u},_minBufferSize:0});c.Hasher=E.extend({cfg:l.extend(),init:function(u){this.cfg=this.cfg.extend(u),this.reset()},reset:function(){E.reset.call(this),this._doReset()},update:function(u){return this._append(u),this._process(),this},finalize:function(u){return u&&this._append(u),this._doFinalize()},blockSize:16,_createHelper:function(u){return function(h,F){return new u.init(F).finalize(h)}},_createHmacHelper:function(u){return function(h,F){return new m.HMAC.init(u,F).finalize(h)}}});var m=a.algo={};return a}(Math),t)}),Hn=(ie(function(n,e){var t;n.exports=(t=je,function(i){var o=t,s=o.lib,a=s.WordArray,c=s.Hasher,l=o.algo,r=[];(function(){for(var m=0;m<64;m++)r[m]=4294967296*i.abs(i.sin(m+1))|0})();var f=l.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,u){for(var h=0;h<16;h++){var F=u+h,k=m[F];m[F]=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8)}var b=this._hash.words,S=m[u+0],T=m[u+1],x=m[u+2],D=m[u+3],z=m[u+4],fe=m[u+5],me=m[u+6],ge=m[u+7],pe=m[u+8],_e=m[u+9],ye=m[u+10],we=m[u+11],be=m[u+12],Ae=m[u+13],ve=m[u+14],ke=m[u+15],g=b[0],y=b[1],p=b[2],_=b[3];g=w(g,y,p,_,S,7,r[0]),_=w(_,g,y,p,T,12,r[1]),p=w(p,_,g,y,x,17,r[2]),y=w(y,p,_,g,D,22,r[3]),g=w(g,y,p,_,z,7,r[4]),_=w(_,g,y,p,fe,12,r[5]),p=w(p,_,g,y,me,17,r[6]),y=w(y,p,_,g,ge,22,r[7]),g=w(g,y,p,_,pe,7,r[8]),_=w(_,g,y,p,_e,12,r[9]),p=w(p,_,g,y,ye,17,r[10]),y=w(y,p,_,g,we,22,r[11]),g=w(g,y,p,_,be,7,r[12]),_=w(_,g,y,p,Ae,12,r[13]),p=w(p,_,g,y,ve,17,r[14]),g=A(g,y=w(y,p,_,g,ke,22,r[15]),p,_,T,5,r[16]),_=A(_,g,y,p,me,9,r[17]),p=A(p,_,g,y,we,14,r[18]),y=A(y,p,_,g,S,20,r[19]),g=A(g,y,p,_,fe,5,r[20]),_=A(_,g,y,p,ye,9,r[21]),p=A(p,_,g,y,ke,14,r[22]),y=A(y,p,_,g,z,20,r[23]),g=A(g,y,p,_,_e,5,r[24]),_=A(_,g,y,p,ve,9,r[25]),p=A(p,_,g,y,D,14,r[26]),y=A(y,p,_,g,pe,20,r[27]),g=A(g,y,p,_,Ae,5,r[28]),_=A(_,g,y,p,x,9,r[29]),p=A(p,_,g,y,ge,14,r[30]),g=v(g,y=A(y,p,_,g,be,20,r[31]),p,_,fe,4,r[32]),_=v(_,g,y,p,pe,11,r[33]),p=v(p,_,g,y,we,16,r[34]),y=v(y,p,_,g,ve,23,r[35]),g=v(g,y,p,_,T,4,r[36]),_=v(_,g,y,p,z,11,r[37]),p=v(p,_,g,y,ge,16,r[38]),y=v(y,p,_,g,ye,23,r[39]),g=v(g,y,p,_,Ae,4,r[40]),_=v(_,g,y,p,S,11,r[41]),p=v(p,_,g,y,D,16,r[42]),y=v(y,p,_,g,me,23,r[43]),g=v(g,y,p,_,_e,4,r[44]),_=v(_,g,y,p,be,11,r[45]),p=v(p,_,g,y,ke,16,r[46]),g=E(g,y=v(y,p,_,g,x,23,r[47]),p,_,S,6,r[48]),_=E(_,g,y,p,ge,10,r[49]),p=E(p,_,g,y,ve,15,r[50]),y=E(y,p,_,g,fe,21,r[51]),g=E(g,y,p,_,be,6,r[52]),_=E(_,g,y,p,D,10,r[53]),p=E(p,_,g,y,ye,15,r[54]),y=E(y,p,_,g,T,21,r[55]),g=E(g,y,p,_,pe,6,r[56]),_=E(_,g,y,p,ke,10,r[57]),p=E(p,_,g,y,me,15,r[58]),y=E(y,p,_,g,Ae,21,r[59]),g=E(g,y,p,_,z,6,r[60]),_=E(_,g,y,p,we,10,r[61]),p=E(p,_,g,y,x,15,r[62]),y=E(y,p,_,g,_e,21,r[63]),b[0]=b[0]+g|0,b[1]=b[1]+y|0,b[2]=b[2]+p|0,b[3]=b[3]+_|0},_doFinalize:function(){var m=this._data,u=m.words,h=8*this._nDataBytes,F=8*m.sigBytes;u[F>>>5]|=128<<24-F%32;var k=i.floor(h/4294967296),b=h;u[15+(F+64>>>9<<4)]=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8),u[14+(F+64>>>9<<4)]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8),m.sigBytes=4*(u.length+1),this._process();for(var S=this._hash,T=S.words,x=0;x<4;x++){var D=T[x];T[x]=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8)}return S},clone:function(){var m=c.clone.call(this);return m._hash=this._hash.clone(),m}});function w(m,u,h,F,k,b,S){var T=m+(u&h|~u&F)+k+S;return(T<<b|T>>>32-b)+u}function A(m,u,h,F,k,b,S){var T=m+(u&F|h&~F)+k+S;return(T<<b|T>>>32-b)+u}function v(m,u,h,F,k,b,S){var T=m+(u^h^F)+k+S;return(T<<b|T>>>32-b)+u}function E(m,u,h,F,k,b,S){var T=m+(h^(u|~F))+k+S;return(T<<b|T>>>32-b)+u}o.MD5=c._createHelper(f),o.HmacMD5=c._createHmacHelper(f)}(Math),t.MD5)}),ie(function(n,e){var t,i,o;n.exports=(i=(t=je).lib.Base,o=t.enc.Utf8,void(t.algo.HMAC=i.extend({init:function(s,a){s=this._hasher=new s.init,typeof a=="string"&&(a=o.parse(a));var c=s.blockSize,l=4*c;a.sigBytes>l&&(a=s.finalize(a)),a.clamp();for(var r=this._oKey=a.clone(),f=this._iKey=a.clone(),w=r.words,A=f.words,v=0;v<c;v++)w[v]^=1549556828,A[v]^=909522486;r.sigBytes=f.sigBytes=l,this.reset()},reset:function(){var s=this._hasher;s.reset(),s.update(this._iKey)},update:function(s){return this._hasher.update(s),this},finalize:function(s){var a=this._hasher,c=a.finalize(s);return a.reset(),a.finalize(this._oKey.clone().concat(c))}})))}),ie(function(n,e){n.exports=je.HmacMD5})),gt="FUNCTION",Vn="OBJECT",Jn="CLIENT_DB";function st(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}function Rt(n){return st(n)==="object"}function Ut(n){return n&&typeof n=="string"?JSON.parse(n):n}var Nt=!1,qt="app";Ut({}.UNICLOUD_DEBUG);var Yn=Ut('[{"provider":"aliyun","spaceName":"positioning","spaceId":"5260c85d-7565-4ff8-8922-3efa92885a84","clientSecret":"AguDoCV7fAJHQXo/k0FuWQ==","endpoint":"https://api.bspapp.com"}]'),jt="";try{jt="__UNI__BA53D3D"}catch(n){}var Me={};function re(n,e={}){var t,i;return t=Me,i=n,Object.prototype.hasOwnProperty.call(t,i)||(Me[n]=e),Me[n]}var Mt=["invoke","success","fail","complete"],$=re("_globalUniCloudInterceptor");function Gn(n,e){$[n]||($[n]={}),Rt(e)&&Object.keys(e).forEach(t=>{Mt.indexOf(t)>-1&&function(i,o,s){let a=$[i][o];a||(a=$[i][o]=[]),a.indexOf(s)===-1&&typeof s=="function"&&a.push(s)}(n,t,e[t])})}function Qn(n,e){$[n]||($[n]={}),Rt(e)?Object.keys(e).forEach(t=>{Mt.indexOf(t)>-1&&function(i,o,s){let a=$[i][o];if(!a)return;let c=a.indexOf(s);c>-1&&a.splice(c,1)}(n,t,e[t])}):delete $[n]}function j(n,e){return n&&n.length!==0?n.reduce((t,i)=>t.then(()=>i(e)),Promise.resolve()):Promise.resolve()}function M(n,e){return $[n]&&$[n][e]||[]}var $e=re("_globalUniCloudListener"),K="response",Z="needLogin",Ce="refreshToken",pt="clientdb",Fe="cloudfunction",_t="cloudobject";function le(n){return $e[n]||($e[n]=[]),$e[n]}function Je(n,e){let t=le(n);t.includes(e)||t.push(e)}function Ye(n,e){let t=le(n),i=t.indexOf(e);i!==-1&&t.splice(i,1)}function U(n,e){let t=le(n);for(let i=0;i<t.length;i++)(0,t[i])(e)}function $t(n,e){return e?function(t){let i=!1;e==="callFunction"&&(i=(t&&t.type||gt)!==gt);let o=e==="callFunction"&&!i,s;s=this.isReady?Promise.resolve():this.initUniCloud,t=t||{};let a=s.then(()=>i?Promise.resolve():j(M(e,"invoke"),t)).then(()=>n.call(this,t)).then(c=>i?Promise.resolve(c):j(M(e,"success"),c).then(()=>j(M(e,"complete"),c)).then(()=>(o&&U(K,{type:Fe,content:c}),Promise.resolve(c))),c=>i?Promise.reject(c):j(M(e,"fail"),c).then(()=>j(M(e,"complete"),c)).then(()=>(U(K,{type:Fe,content:c}),Promise.reject(c))));if(!(t.success||t.fail||t.complete))return a;a.then(c=>{t.success&&t.success(c),t.complete&&t.complete(c),o&&U(K,{type:Fe,content:c})},c=>{t.fail&&t.fail(c),t.complete&&t.complete(c),o&&U(K,{type:Fe,content:c})})}:function(t){if(!((t=t||{}).success||t.fail||t.complete))return n.call(this,t);n.call(this,t).then(i=>{t.success&&t.success(i),t.complete&&t.complete(i)},i=>{t.fail&&t.fail(i),t.complete&&t.complete(i)})}}var C=class extends Error{constructor(e){super(e.message),this.errMsg=e.message||"",this.errCode=this.code=e.code||"SYSTEM_ERROR",this.requestId=e.requestId}};function Xn(){let n;try{if(uni.getLaunchOptionsSync){if(uni.getLaunchOptionsSync.toString().indexOf("not yet implemented")>-1)return;let{scene:e,channel:t}=uni.getLaunchOptionsSync();n=e||t}}catch(e){}return n}var Se;function Kt(){let n=uni.getLocale&&uni.getLocale()||"en";if(Se)return ae(O({},Se),{locale:n,LOCALE:n});let e=uni.getSystemInfoSync(),{deviceId:t,platform:i,osName:o,uniPlatform:s,appId:a}=e,c=["pixelRatio","brand","model","system","language","version","platform","host","SDKVersion","swanNativeVersion","app","AppPlatform","fontSizeSettin"];for(let l=0;l<c.length;l++)delete e[c[l]];return Se=O({PLATFORM:s||qt,OS:o||i,APPID:a||jt,DEVICEID:t,channel:Xn()},e),ae(O({},Se),{locale:n,LOCALE:n})}var Te={sign:function(n,e){let t="";return Object.keys(n).sort().forEach(function(i){n[i]&&(t=t+"&"+i+"="+n[i])}),t=t.slice(1),Hn(t,e).toString()},wrappedRequest:function(n,e){return new Promise((t,i)=>{e(Object.assign(n,{complete(o){o||(o={});let s=o.data&&o.data.header&&o.data.header["x-serverless-request-id"]||o.header&&o.header["request-id"];if(!o.statusCode||o.statusCode>=400)return i(new C({code:"SYS_ERR",message:o.errMsg||"request:fail",requestId:s}));let a=o.data;if(a.error)return i(new C({code:a.error.code,message:a.error.message,requestId:s}));a.result=a.data,a.requestId=s,delete a.data,t(a)}}))})}},N={request:n=>uni.request(n),uploadFile:n=>uni.uploadFile(n),setStorageSync:(n,e)=>uni.setStorageSync(n,e),getStorageSync:n=>uni.getStorageSync(n),removeStorageSync:n=>uni.removeStorageSync(n),clearStorageSync:()=>uni.clearStorageSync()},yt={"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},{t:Zn}=Mn({"zh-Hans":{"uniCloud.init.paramRequired":"\u7F3A\u5C11\u53C2\u6570\uFF1A{param}","uniCloud.uploadFile.fileError":"filePath\u5E94\u4E3AFile\u5BF9\u8C61"},"zh-Hant":{"uniCloud.init.paramRequired":"\u7F3A\u5C11\u53C2\u6570\uFF1A{param}","uniCloud.uploadFile.fileError":"filePath\u5E94\u4E3AFile\u5BF9\u8C61"},en:yt,fr:{"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},es:{"uniCloud.init.paramRequired":"{param} required","uniCloud.uploadFile.fileError":"filePath should be instance of File"},ja:yt},"zh-Hans"),zt=class{constructor(n){["spaceId","clientSecret"].forEach(e=>{if(!Object.prototype.hasOwnProperty.call(n,e))throw new Error(Zn("uniCloud.init.paramRequired",{param:e}))}),this.config=Object.assign({},{endpoint:"https://api.bspapp.com"},n),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=N,this._getAccessTokenPromise=null,this._getAccessTokenPromiseStatus=null}get hasAccessToken(){return!!this.accessToken}setAccessToken(n){this.accessToken=n}requestWrapped(n){return Te.wrappedRequest(n,this.adapter.request)}requestAuth(n){return this.requestWrapped(n)}request(n,e){return Promise.resolve().then(()=>this.hasAccessToken?e?this.requestWrapped(n):this.requestWrapped(n).catch(t=>new Promise((i,o)=>{!t||t.code!=="GATEWAY_INVALID_TOKEN"&&t.code!=="InvalidParameter.InvalidToken"?o(t):i()}).then(()=>this.getAccessToken()).then(()=>{let i=this.rebuildRequest(n);return this.request(i,!0)})):this.getAccessToken().then(()=>{let t=this.rebuildRequest(n);return this.request(t,!0)}))}rebuildRequest(n){let e=Object.assign({},n);return e.data.token=this.accessToken,e.header["x-basement-token"]=this.accessToken,e.header["x-serverless-sign"]=Te.sign(e.data,this.config.clientSecret),e}setupRequest(n,e){let t=Object.assign({},n,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};return e!=="auth"&&(t.token=this.accessToken,i["x-basement-token"]=this.accessToken),i["x-serverless-sign"]=Te.sign(t,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:t,dataType:"json",header:i}}getAccessToken(){return this._getAccessTokenPromiseStatus==="pending"?this._getAccessTokenPromise:(this._getAccessTokenPromiseStatus="pending",this._getAccessTokenPromise=this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then(n=>new Promise((e,t)=>{n.result&&n.result.accessToken?(this.setAccessToken(n.result.accessToken),this._getAccessTokenPromiseStatus="fulfilled",e(this.accessToken)):(this._getAccessTokenPromiseStatus="rejected",t(new C({code:"AUTH_FAILED",message:"\u83B7\u53D6accessToken\u5931\u8D25"})))}),n=>(this._getAccessTokenPromiseStatus="rejected",Promise.reject(n))),this._getAccessTokenPromise)}authorize(){this.getAccessToken()}callFunction(n){let e={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:n.name,functionArgs:n.data||{}})};return this.request(this.setupRequest(e))}getOSSUploadOptionsFromPath(n){let e={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(n)};return this.request(this.setupRequest(e))}uploadFileToOSS({url:n,formData:e,name:t,filePath:i,fileType:o,onUploadProgress:s}){return new Promise((a,c)=>{let l=this.adapter.uploadFile({url:n,formData:e,name:t,filePath:i,fileType:o,header:{"X-OSS-server-side-encrpytion":"AES256"},success(r){r&&r.statusCode<400?a(r):c(new C({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(r){c(new C({code:r.code||"UPLOAD_FAILED",message:r.message||r.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof s=="function"&&l&&typeof l.onProgressUpdate=="function"&&l.onProgressUpdate(r=>{s({loaded:r.totalBytesSent,total:r.totalBytesExpectedToSend})})})}reportOSSUpload(n){let e={method:"serverless.file.resource.report",params:JSON.stringify(n)};return this.request(this.setupRequest(e))}uploadFile({filePath:n,cloudPath:e,fileType:t="image",onUploadProgress:i,config:o}){if(st(e)!=="string")throw new C({code:"INVALID_PARAM",message:"cloudPath\u5FC5\u987B\u4E3A\u5B57\u7B26\u4E32\u7C7B\u578B"});if(!(e=e.trim()))throw new C({code:"CLOUDPATH_REQUIRED",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});if(/:\/\//.test(e))throw new C({code:"INVALID_PARAM",message:"cloudPath\u4E0D\u5408\u6CD5"});let s=o&&o.envType||this.config.envType,a,c;return this.getOSSUploadOptionsFromPath({env:s,filename:e}).then(l=>{let r=l.result;a=r.id,c="https://"+r.cdnDomain+"/"+r.ossPath;let f={url:"https://"+r.host,formData:{"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:r.accessKeyId,Signature:r.signature,host:r.host,id:a,key:r.ossPath,policy:r.policy,success_action_status:200},fileName:"file",name:"file",filePath:n,fileType:t};return this.uploadFileToOSS(Object.assign({},f,{onUploadProgress:i}))}).then(()=>this.reportOSSUpload({id:a})).then(l=>new Promise((r,f)=>{l.success?r({success:!0,filePath:n,fileID:c}):f(new C({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}))}deleteFile({fileList:n}){let e={method:"serverless.file.resource.delete",params:JSON.stringify({id:n[0]})};return this.request(this.setupRequest(e))}getTempFileURL({fileList:n}={}){return new Promise((e,t)=>{Array.isArray(n)&&n.length!==0||t(new C({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"})),e({fileList:n.map(i=>({fileID:i,tempFileURL:i}))})})}},ei={init(n){let e=new zt(n),t={signInAnonymously:function(){return e.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return e.auth=function(){return t},e.customAuth=e.auth,e}},ti=typeof location!="undefined"&&location.protocol==="http:"?"http:":"https:",wt;(function(n){n.local="local",n.none="none",n.session="session"})(wt||(wt={}));var ni=function(){},de=()=>{let n;if(!Promise){n=()=>{},n.promise={};let t=()=>{throw new C({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(n.promise,"then",{get:t}),Object.defineProperty(n.promise,"catch",{get:t}),n}let e=new Promise((t,i)=>{n=(o,s)=>o?i(o):t(s)});return n.promise=e,n};function ii(n){return n===void 0}function oi(n){return Object.prototype.toString.call(n)==="[object Null]"}var bt;function si(n){let e=(t=n,Object.prototype.toString.call(t)==="[object Array]"?n:[n]);var t;for(let i of e){let{isMatch:o,genAdapter:s,runtime:a}=i;if(o())return{adapter:s(),runtime:a}}}(function(n){n.WEB="web",n.WX_MP="wx_mp"})(bt||(bt={}));var L={adapter:null,runtime:void 0},ai=["anonymousUuidKey"],oe=class extends ni{constructor(){super(),L.adapter.root.tcbObject||(L.adapter.root.tcbObject={})}setItem(e,t){L.adapter.root.tcbObject[e]=t}getItem(e){return L.adapter.root.tcbObject[e]}removeItem(e){delete L.adapter.root.tcbObject[e]}clear(){delete L.adapter.root.tcbObject}};function At(n,e){switch(n){case"local":return e.localStorage||new oe;case"none":return new oe;default:return e.sessionStorage||new oe}}var Ie=class{constructor(e){if(!this._storage){this._persistence=L.adapter.primaryStorage||e.persistence,this._storage=At(this._persistence,L.adapter);let t=`access_token_${e.env}`,i=`access_token_expire_${e.env}`,o=`refresh_token_${e.env}`,s=`anonymous_uuid_${e.env}`,a=`login_type_${e.env}`,c=`user_info_${e.env}`;this.keys={accessTokenKey:t,accessTokenExpireKey:i,refreshTokenKey:o,anonymousUuidKey:s,loginTypeKey:a,userInfoKey:c}}}updatePersistence(e){if(e===this._persistence)return;let t=this._persistence==="local";this._persistence=e;let i=At(e,L.adapter);for(let o in this.keys){let s=this.keys[o];if(t&&ai.includes(o))continue;let a=this._storage.getItem(s);ii(a)||oi(a)||(i.setItem(s,a),this._storage.removeItem(s))}this._storage=i}setStore(e,t,i){if(!this._storage)return;let o={version:i||"localCachev1",content:t},s=JSON.stringify(o);try{this._storage.setItem(e,s)}catch(a){throw a}}getStore(e,t){try{if(!this._storage)return}catch(o){return""}t=t||"localCachev1";let i=this._storage.getItem(e);return i&&i.indexOf(t)>=0?JSON.parse(i).content:""}removeStore(e){this._storage.removeItem(e)}},Wt={},Ht={};function he(n){return Wt[n]}var De=class{constructor(e,t){this.data=t||null,this.name=e}},Ge=class extends De{constructor(e,t){super("error",{error:e,data:t}),this.error=e}},at=new class{constructor(){this._listeners={}}on(n,e){return function(t,i,o){o[t]=o[t]||[],o[t].push(i)}(n,e,this._listeners),this}off(n,e){return function(t,i,o){if(o&&o[t]){let s=o[t].indexOf(i);s!==-1&&o[t].splice(s,1)}}(n,e,this._listeners),this}fire(n,e){if(n instanceof Ge)return console.error(n.error),this;let t=typeof n=="string"?new De(n,e||{}):n,i=t.name;if(this._listens(i)){t.target=this;let o=this._listeners[i]?[...this._listeners[i]]:[];for(let s of o)s.call(this,t)}return this}_listens(n){return this._listeners[n]&&this._listeners[n].length>0}};function H(n,e){at.on(n,e)}function R(n,e={}){at.fire(n,e)}function ri(n,e){at.off(n,e)}var ee="loginStateChanged",Vt="loginStateExpire",V="loginTypeChanged",Qe="anonymousConverted",Jt="refreshAccessToken",P;(function(n){n.ANONYMOUS="ANONYMOUS",n.WECHAT="WECHAT",n.WECHAT_PUBLIC="WECHAT-PUBLIC",n.WECHAT_OPEN="WECHAT-OPEN",n.CUSTOM="CUSTOM",n.EMAIL="EMAIL",n.USERNAME="USERNAME",n.NULL="NULL"})(P||(P={}));var vt=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],ci={"X-SDK-Version":"1.3.5"};function Ke(n,e,t){let i=n[e];n[e]=function(o){let s={},a={};t.forEach(l=>{let{data:r,headers:f}=l.call(n,o);Object.assign(s,r),Object.assign(a,f)});let c=o.data;return c&&(()=>{var l;if(l=c,Object.prototype.toString.call(l)!=="[object FormData]")o.data=O(O({},c),s);else for(let r in s)c.append(r,s[r])})(),o.headers=O(O({},o.headers||{}),a),i.call(n,o)}}function ze(){let n=Math.random().toString(16).slice(2);return{data:{seqId:n},headers:ae(O({},ci),{"x-seqid":n})}}var Xe=class{constructor(e={}){var t;this.config=e,this._reqClass=new L.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:`\u8BF7\u6C42\u5728${this.config.timeout/1e3}s\u5185\u672A\u5B8C\u6210\uFF0C\u5DF2\u4E2D\u65AD`,restrictedMethods:["post"]}),this._cache=he(this.config.env),this._localCache=(t=this.config.env,Ht[t]),Ke(this._reqClass,"post",[ze]),Ke(this._reqClass,"upload",[ze]),Ke(this._reqClass,"download",[ze])}post(e){return I(this,null,function*(){return yield this._reqClass.post(e)})}upload(e){return I(this,null,function*(){return yield this._reqClass.upload(e)})}download(e){return I(this,null,function*(){return yield this._reqClass.download(e)})}refreshAccessToken(){return I(this,null,function*(){let e,t;this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken());try{e=yield this._refreshAccessTokenPromise}catch(i){t=i}if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,t)throw t;return e})}_refreshAccessToken(){return I(this,null,function*(){let{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:i,loginTypeKey:o,anonymousUuidKey:s}=this._cache.keys;this._cache.removeStore(e),this._cache.removeStore(t);let a=this._cache.getStore(i);if(!a)throw new C({message:"\u672A\u767B\u5F55CloudBase"});let c={refresh_token:a},l=yield this.request("auth.fetchAccessTokenWithRefreshToken",c);if(l.data.code){let{code:r}=l.data;if(r==="SIGN_PARAM_INVALID"||r==="REFRESH_TOKEN_EXPIRED"||r==="INVALID_REFRESH_TOKEN"){if(this._cache.getStore(o)===P.ANONYMOUS&&r==="INVALID_REFRESH_TOKEN"){let f=this._cache.getStore(s),w=this._cache.getStore(i),A=yield this.send("auth.signInAnonymously",{anonymous_uuid:f,refresh_token:w});return this.setRefreshToken(A.refresh_token),this._refreshAccessToken()}R(Vt),this._cache.removeStore(i)}throw new C({code:l.data.code,message:`\u5237\u65B0access token\u5931\u8D25\uFF1A${l.data.code}`})}if(l.data.access_token)return R(Jt),this._cache.setStore(e,l.data.access_token),this._cache.setStore(t,l.data.access_token_expire+Date.now()),{accessToken:l.data.access_token,accessTokenExpire:l.data.access_token_expire};l.data.refresh_token&&(this._cache.removeStore(i),this._cache.setStore(i,l.data.refresh_token),this._refreshAccessToken())})}getAccessToken(){return I(this,null,function*(){let{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:i}=this._cache.keys;if(!this._cache.getStore(i))throw new C({message:"refresh token\u4E0D\u5B58\u5728\uFF0C\u767B\u5F55\u72B6\u6001\u5F02\u5E38"});let o=this._cache.getStore(e),s=this._cache.getStore(t),a=!0;return this._shouldRefreshAccessTokenHook&&!(yield this._shouldRefreshAccessTokenHook(o,s))&&(a=!1),(!o||!s||s<Date.now())&&a?this.refreshAccessToken():{accessToken:o,accessTokenExpire:s}})}request(e,t,i){return I(this,null,function*(){let o=`x-tcb-trace_${this.config.env}`,s="application/x-www-form-urlencoded",a=O({action:e,env:this.config.env,dataVersion:"2019-08-16"},t);if(vt.indexOf(e)===-1){let{refreshTokenKey:h}=this._cache.keys;this._cache.getStore(h)&&(a.access_token=(yield this.getAccessToken()).accessToken)}let c;if(e==="storage.uploadFile"){c=new FormData;for(let h in c)c.hasOwnProperty(h)&&c[h]!==void 0&&c.append(h,a[h]);s="multipart/form-data"}else{s="application/json",c={};for(let h in a)a[h]!==void 0&&(c[h]=a[h])}let l={headers:{"content-type":s}};i&&i.onUploadProgress&&(l.onUploadProgress=i.onUploadProgress);let r=this._localCache.getStore(o);r&&(l.headers["X-TCB-Trace"]=r);let{parse:f,inQuery:w,search:A}=t,v={env:this.config.env};f&&(v.parse=!0),w&&(v=O(O({},w),v));let E=function(h,F,k={}){let b=/\?/.test(F),S="";for(let T in k)S===""?!b&&(F+="?"):S+="&",S+=`${T}=${encodeURIComponent(k[T])}`;return/^http(s)?\:\/\//.test(F+=S)?F:`${h}${F}`}(ti,"//tcb-api.tencentcloudapi.com/web",v);A&&(E+=A);let m=yield this.post(O({url:E,data:c},l)),u=m.header&&m.header["x-tcb-trace"];if(u&&this._localCache.setStore(o,u),Number(m.status)!==200&&Number(m.statusCode)!==200||!m.data)throw new C({code:"NETWORK_ERROR",message:"network request error"});return m})}send(i){return I(this,arguments,function*(e,t={}){let o=yield this.request(e,t,{onUploadProgress:t.onUploadProgress});if(o.data.code==="ACCESS_TOKEN_EXPIRED"&&vt.indexOf(e)===-1){yield this.refreshAccessToken();let s=yield this.request(e,t,{onUploadProgress:t.onUploadProgress});if(s.data.code)throw new C({code:s.data.code,message:s.data.message});return s.data}if(o.data.code)throw new C({code:o.data.code,message:o.data.message});return o.data})}setRefreshToken(e){let{accessTokenKey:t,accessTokenExpireKey:i,refreshTokenKey:o}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(i),this._cache.setStore(o,e)}},Yt={};function W(n){return Yt[n]}var te=class{constructor(e){this.config=e,this._cache=he(e.env),this._request=W(e.env)}setRefreshToken(e){let{accessTokenKey:t,accessTokenExpireKey:i,refreshTokenKey:o}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(i),this._cache.setStore(o,e)}setAccessToken(e,t){let{accessTokenKey:i,accessTokenExpireKey:o}=this._cache.keys;this._cache.setStore(i,e),this._cache.setStore(o,t)}refreshUserInfo(){return I(this,null,function*(){let{data:e}=yield this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e})}setLocalUserInfo(e){let{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e)}},Ze=class{constructor(e){if(!e)throw new C({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=e,this._cache=he(this._envId),this._request=W(this._envId),this.setUserInfo()}linkWithTicket(e){if(typeof e!="string")throw new C({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}linkWithRedirect(e){e.signInWithRedirect()}updatePassword(e,t){return this._request.send("auth.updatePassword",{oldPassword:t,newPassword:e})}updateEmail(e){return this._request.send("auth.updateEmail",{newEmail:e})}updateUsername(e){if(typeof e!="string")throw new C({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}getLinkedUidList(){return I(this,null,function*(){let{data:e}=yield this._request.send("auth.getLinkedUidList",{}),t=!1,{users:i}=e;return i.forEach(o=>{o.wxOpenId&&o.wxPublicId&&(t=!0)}),{users:i,hasPrimaryUid:t}})}setPrimaryUid(e){return this._request.send("auth.setPrimaryUid",{uid:e})}unlink(e){return this._request.send("auth.unlink",{platform:e})}update(e){return I(this,null,function*(){let{nickName:t,gender:i,avatarUrl:o,province:s,country:a,city:c}=e,{data:l}=yield this._request.send("auth.updateUserInfo",{nickName:t,gender:i,avatarUrl:o,province:s,country:a,city:c});this.setLocalUserInfo(l)})}refresh(){return I(this,null,function*(){let{data:e}=yield this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e})}setUserInfo(){let{userInfoKey:e}=this._cache.keys,t=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach(i=>{this[i]=t[i]}),this.location={country:t.country,province:t.province,city:t.city}}setLocalUserInfo(e){let{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e),this.setUserInfo()}},G=class{constructor(e){if(!e)throw new C({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=he(e);let{refreshTokenKey:t,accessTokenKey:i,accessTokenExpireKey:o}=this._cache.keys,s=this._cache.getStore(t),a=this._cache.getStore(i),c=this._cache.getStore(o);this.credential={refreshToken:s,accessToken:a,accessTokenExpire:c},this.user=new Ze(e)}get isAnonymousAuth(){return this.loginType===P.ANONYMOUS}get isCustomAuth(){return this.loginType===P.CUSTOM}get isWeixinAuth(){return this.loginType===P.WECHAT||this.loginType===P.WECHAT_OPEN||this.loginType===P.WECHAT_PUBLIC}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}},se=class extends te{signIn(){return I(this,null,function*(){this._cache.updatePersistence("local");let{anonymousUuidKey:e,refreshTokenKey:t}=this._cache.keys,i=this._cache.getStore(e)||void 0,o=this._cache.getStore(t)||void 0,s=yield this._request.send("auth.signInAnonymously",{anonymous_uuid:i,refresh_token:o});if(s.uuid&&s.refresh_token){this._setAnonymousUUID(s.uuid),this.setRefreshToken(s.refresh_token),yield this._request.refreshAccessToken(),R(ee),R(V,{env:this.config.env,loginType:P.ANONYMOUS,persistence:"local"});let a=new G(this.config.env);return yield a.user.refresh(),a}throw new C({message:"\u533F\u540D\u767B\u5F55\u5931\u8D25"})})}linkAndRetrieveDataWithTicket(e){return I(this,null,function*(){let{anonymousUuidKey:t,refreshTokenKey:i}=this._cache.keys,o=this._cache.getStore(t),s=this._cache.getStore(i),a=yield this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:o,refresh_token:s,ticket:e});if(a.refresh_token)return this._clearAnonymousUUID(),this.setRefreshToken(a.refresh_token),yield this._request.refreshAccessToken(),R(Qe,{env:this.config.env}),R(V,{loginType:P.CUSTOM,persistence:"local"}),{credential:{refreshToken:a.refresh_token}};throw new C({message:"\u533F\u540D\u8F6C\u5316\u5931\u8D25"})})}_setAnonymousUUID(e){let{anonymousUuidKey:t,loginTypeKey:i}=this._cache.keys;this._cache.removeStore(t),this._cache.setStore(t,e),this._cache.setStore(i,P.ANONYMOUS)}_clearAnonymousUUID(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}},xe=class extends te{signIn(e){return I(this,null,function*(){if(typeof e!="string")throw new C({param:"PARAM_ERROR",message:"ticket must be a string"});let{refreshTokenKey:t}=this._cache.keys,i=yield this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(t)||""});if(i.refresh_token)return this.setRefreshToken(i.refresh_token),yield this._request.refreshAccessToken(),R(ee),R(V,{env:this.config.env,loginType:P.CUSTOM,persistence:this.config.persistence}),yield this.refreshUserInfo(),new G(this.config.env);throw new C({message:"\u81EA\u5B9A\u4E49\u767B\u5F55\u5931\u8D25"})})}},Pe=class extends te{signIn(e,t){return I(this,null,function*(){if(typeof e!="string")throw new C({code:"PARAM_ERROR",message:"email must be a string"});let{refreshTokenKey:i}=this._cache.keys,o=yield this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:t,refresh_token:this._cache.getStore(i)||""}),{refresh_token:s,access_token:a,access_token_expire:c}=o;if(s)return this.setRefreshToken(s),a&&c?this.setAccessToken(a,c):yield this._request.refreshAccessToken(),yield this.refreshUserInfo(),R(ee),R(V,{env:this.config.env,loginType:P.EMAIL,persistence:this.config.persistence}),new G(this.config.env);throw o.code?new C({code:o.code,message:`\u90AE\u7BB1\u767B\u5F55\u5931\u8D25: ${o.message}`}):new C({message:"\u90AE\u7BB1\u767B\u5F55\u5931\u8D25"})})}activate(e){return I(this,null,function*(){return this._request.send("auth.activateEndUserMail",{token:e})})}resetPasswordWithToken(e,t){return I(this,null,function*(){return this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:t})})}},Oe=class extends te{signIn(e,t){return I(this,null,function*(){if(typeof e!="string")throw new C({code:"PARAM_ERROR",message:"username must be a string"});typeof t!="string"&&(t="",console.warn("password is empty"));let{refreshTokenKey:i}=this._cache.keys,o=yield this._request.send("auth.signIn",{loginType:P.USERNAME,username:e,password:t,refresh_token:this._cache.getStore(i)||""}),{refresh_token:s,access_token_expire:a,access_token:c}=o;if(s)return this.setRefreshToken(s),c&&a?this.setAccessToken(c,a):yield this._request.refreshAccessToken(),yield this.refreshUserInfo(),R(ee),R(V,{env:this.config.env,loginType:P.USERNAME,persistence:this.config.persistence}),new G(this.config.env);throw o.code?new C({code:o.code,message:`\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55\u5931\u8D25: ${o.message}`}):new C({message:"\u7528\u6237\u540D\u5BC6\u7801\u767B\u5F55\u5931\u8D25"})})}},et=class{constructor(e){this.config=e,this._cache=he(e.env),this._request=W(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),H(V,this._onLoginTypeChanged)}get currentUser(){let e=this.hasLoginState();return e&&e.user||null}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}anonymousAuthProvider(){return new se(this.config)}customAuthProvider(){return new xe(this.config)}emailAuthProvider(){return new Pe(this.config)}usernameAuthProvider(){return new Oe(this.config)}signInAnonymously(){return I(this,null,function*(){return new se(this.config).signIn()})}signInWithEmailAndPassword(e,t){return I(this,null,function*(){return new Pe(this.config).signIn(e,t)})}signInWithUsernameAndPassword(e,t){return new Oe(this.config).signIn(e,t)}linkAndRetrieveDataWithTicket(e){return I(this,null,function*(){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new se(this.config)),H(Qe,this._onAnonymousConverted),yield this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e)})}signOut(){return I(this,null,function*(){if(this.loginType===P.ANONYMOUS)throw new C({message:"\u533F\u540D\u7528\u6237\u4E0D\u652F\u6301\u767B\u51FA\u64CD\u4F5C"});let{refreshTokenKey:e,accessTokenKey:t,accessTokenExpireKey:i}=this._cache.keys,o=this._cache.getStore(e);if(!o)return;let s=yield this._request.send("auth.logout",{refresh_token:o});return this._cache.removeStore(e),this._cache.removeStore(t),this._cache.removeStore(i),R(ee),R(V,{env:this.config.env,loginType:P.NULL,persistence:this.config.persistence}),s})}signUpWithEmailAndPassword(e,t){return I(this,null,function*(){return this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:t})})}sendPasswordResetEmail(e){return I(this,null,function*(){return this._request.send("auth.sendPasswordResetEmail",{email:e})})}onLoginStateChanged(e){H(ee,()=>{let i=this.hasLoginState();e.call(this,i)});let t=this.hasLoginState();e.call(this,t)}onLoginStateExpired(e){H(Vt,e.bind(this))}onAccessTokenRefreshed(e){H(Jt,e.bind(this))}onAnonymousConverted(e){H(Qe,e.bind(this))}onLoginTypeChanged(e){H(V,()=>{let t=this.hasLoginState();e.call(this,t)})}getAccessToken(){return I(this,null,function*(){return{accessToken:(yield this._request.getAccessToken()).accessToken,env:this.config.env}})}hasLoginState(){let{refreshTokenKey:e}=this._cache.keys;return this._cache.getStore(e)?new G(this.config.env):null}isUsernameRegistered(e){return I(this,null,function*(){if(typeof e!="string")throw new C({code:"PARAM_ERROR",message:"username must be a string"});let{data:t}=yield this._request.send("auth.isUsernameRegistered",{username:e});return t&&t.isRegistered})}getLoginState(){return Promise.resolve(this.hasLoginState())}signInWithTicket(e){return I(this,null,function*(){return new xe(this.config).signIn(e)})}shouldRefreshAccessToken(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}getUserInfo(){return this._request.send("auth.getUserInfo",{}).then(e=>e.code?e:ae(O({},e.data),{requestId:e.seqId}))}getAuthHeader(){let{refreshTokenKey:e,accessTokenKey:t}=this._cache.keys,i=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(t)+"/@@/"+i}}_onAnonymousConverted(e){let{env:t}=e.data;t===this.config.env&&this._cache.updatePersistence(this.config.persistence)}_onLoginTypeChanged(e){let{loginType:t,persistence:i,env:o}=e.data;o===this.config.env&&(this._cache.updatePersistence(i),this._cache.setStore(this._cache.keys.loginTypeKey,t))}},ui=function(n,e){e=e||de();let t=W(this.config.env),{cloudPath:i,filePath:o,onUploadProgress:s,fileType:a="image"}=n;return t.send("storage.getUploadMetadata",{path:i}).then(c=>{let{data:{url:l,authorization:r,token:f,fileId:w,cosFileId:A},requestId:v}=c,E={key:i,signature:r,"x-cos-meta-fileid":A,success_action_status:"201","x-cos-security-token":f};t.upload({url:l,data:E,file:o,name:i,fileType:a,onUploadProgress:s}).then(m=>{m.statusCode===201?e(null,{fileID:w,requestId:v}):e(new C({code:"STORAGE_REQUEST_FAIL",message:`STORAGE_REQUEST_FAIL: ${m.data}`}))}).catch(m=>{e(m)})}).catch(c=>{e(c)}),e.promise},li=function(n,e){e=e||de();let t=W(this.config.env),{cloudPath:i}=n;return t.send("storage.getUploadMetadata",{path:i}).then(o=>{e(null,o)}).catch(o=>{e(o)}),e.promise},di=function({fileList:n},e){if(e=e||de(),!n||!Array.isArray(n))return{code:"INVALID_PARAM",message:"fileList\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u6570\u7EC4"};for(let i of n)if(!i||typeof i!="string")return{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u5B57\u7B26\u4E32"};let t={fileid_list:n};return W(this.config.env).send("storage.batchDeleteFile",t).then(i=>{i.code?e(null,i):e(null,{fileList:i.data.delete_list,requestId:i.requestId})}).catch(i=>{e(i)}),e.promise},Gt=function({fileList:n},e){e=e||de(),n&&Array.isArray(n)||e(null,{code:"INVALID_PARAM",message:"fileList\u5FC5\u987B\u662F\u975E\u7A7A\u7684\u6570\u7EC4"});let t=[];for(let o of n)typeof o=="object"?(o.hasOwnProperty("fileID")&&o.hasOwnProperty("maxAge")||e(null,{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u5305\u542BfileID\u548CmaxAge\u7684\u5BF9\u8C61"}),t.push({fileid:o.fileID,max_age:o.maxAge})):typeof o=="string"?t.push({fileid:o}):e(null,{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7D20\u5FC5\u987B\u662F\u5B57\u7B26\u4E32"});let i={file_list:t};return W(this.config.env).send("storage.batchGetDownloadUrl",i).then(o=>{o.code?e(null,o):e(null,{fileList:o.data.download_list,requestId:o.requestId})}).catch(o=>{e(o)}),e.promise},hi=function(t,i){return I(this,arguments,function*({fileID:n},e){let o=(yield Gt.call(this,{fileList:[{fileID:n,maxAge:600}]})).fileList[0];if(o.code!=="SUCCESS")return e?e(o):new Promise(c=>{c(o)});let s=W(this.config.env),a=o.download_url;if(a=encodeURI(a),!e)return s.download({url:a});e(yield s.download({url:a}))})},fi=function({name:n,data:e,query:t,parse:i,search:o},s){let a=s||de(),c;try{c=e?JSON.stringify(e):""}catch(r){return Promise.reject(r)}if(!n)return Promise.reject(new C({code:"PARAM_ERROR",message:"\u51FD\u6570\u540D\u4E0D\u80FD\u4E3A\u7A7A"}));let l={inQuery:t,parse:i,search:o,function_name:n,request_data:c};return W(this.config.env).send("functions.invokeFunction",l).then(r=>{if(r.code)a(null,r);else{let f=r.data.response_data;if(i)a(null,{result:f,requestId:r.requestId});else try{f=JSON.parse(r.data.response_data),a(null,{result:f,requestId:r.requestId})}catch(w){a(new C({message:"response data must be json"}))}}return a.promise}).catch(r=>{a(r)}),a.promise},kt={timeout:15e3,persistence:"session"},Ft={},ce=class{constructor(e){this.config=e||this.config,this.authObj=void 0}init(e){switch(L.adapter||(this.requestClient=new L.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:`\u8BF7\u6C42\u5728${(e.timeout||5e3)/1e3}s\u5185\u672A\u5B8C\u6210\uFF0C\u5DF2\u4E2D\u65AD`})),this.config=O(O({},kt),e),!0){case this.config.timeout>6e5:console.warn("timeout\u5927\u4E8E\u53EF\u914D\u7F6E\u4E0A\u9650[10\u5206\u949F]\uFF0C\u5DF2\u91CD\u7F6E\u4E3A\u4E0A\u9650\u6570\u503C"),this.config.timeout=6e5;break;case this.config.timeout<100:console.warn("timeout\u5C0F\u4E8E\u53EF\u914D\u7F6E\u4E0B\u9650[100ms]\uFF0C\u5DF2\u91CD\u7F6E\u4E3A\u4E0B\u9650\u6570\u503C"),this.config.timeout=100}return new ce(this.config)}auth({persistence:e}={}){if(this.authObj)return this.authObj;let t=e||L.adapter.primaryStorage||kt.persistence;var i;return t!==this.config.persistence&&(this.config.persistence=t),function(o){let{env:s}=o;Wt[s]=new Ie(o),Ht[s]=new Ie(ae(O({},o),{persistence:"local"}))}(this.config),i=this.config,Yt[i.env]=new Xe(i),this.authObj=new et(this.config),this.authObj}on(e,t){return H.apply(this,[e,t])}off(e,t){return ri.apply(this,[e,t])}callFunction(e,t){return fi.apply(this,[e,t])}deleteFile(e,t){return di.apply(this,[e,t])}getTempFileURL(e,t){return Gt.apply(this,[e,t])}downloadFile(e,t){return hi.apply(this,[e,t])}uploadFile(e,t){return ui.apply(this,[e,t])}getUploadMetadata(e,t){return li.apply(this,[e,t])}registerExtension(e){Ft[e.name]=e}invokeExtension(e,t){return I(this,null,function*(){let i=Ft[e];if(!i)throw new C({message:`\u6269\u5C55${e} \u5FC5\u987B\u5148\u6CE8\u518C`});return yield i.invoke(t,this)})}useAdapters(e){let{adapter:t,runtime:i}=si(e)||{};t&&(L.adapter=t),i&&(L.runtime=i)}},Qt=new ce;function St(n,e,t){t===void 0&&(t={});var i=/\?/.test(e),o="";for(var s in t)o===""?!i&&(e+="?"):o+="&",o+=s+"="+encodeURIComponent(t[s]);return/^http(s)?:\/\//.test(e+=o)?e:""+n+e}var tt=class{post(e){let{url:t,data:i,headers:o}=e;return new Promise((s,a)=>{N.request({url:St("https:",t),data:i,method:"POST",header:o,success(c){s(c)},fail(c){a(c)}})})}upload(e){return new Promise((t,i)=>{let{url:o,file:s,data:a,headers:c,fileType:l}=e,r=N.uploadFile({url:St("https:",o),name:"file",formData:Object.assign({},a),filePath:s,fileType:l,header:c,success(f){let w={statusCode:f.statusCode,data:f.data||{}};f.statusCode===200&&a.success_action_status&&(w.statusCode=parseInt(a.success_action_status,10)),t(w)},fail(f){i(new Error(f.errMsg||"uploadFile:fail"))}});typeof e.onUploadProgress=="function"&&r&&typeof r.onProgressUpdate=="function"&&r.onProgressUpdate(f=>{e.onUploadProgress({loaded:f.totalBytesSent,total:f.totalBytesExpectedToSend})})})}},mi={setItem(n,e){N.setStorageSync(n,e)},getItem:n=>N.getStorageSync(n),removeItem(n){N.removeStorageSync(n)},clear(){N.clearStorageSync()}},gi={genAdapter:function(){return{root:{},reqClass:tt,localStorage:mi,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};Qt.useAdapters(gi);var rt=Qt,pi=rt.init;rt.init=function(n){n.env=n.spaceId;let e=pi.call(this,n);e.config.provider="tencent",e.config.spaceId=n.spaceId;let t=e.auth;return e.auth=function(i){let o=t.call(this,i);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach(s=>{o[s]=$t(o[s]).bind(o)}),o},e.customAuth=e.auth,e};var _i=rt;function Xt(n){return n&&Xt(n.__v_raw)||n}function Re(){return{token:N.getStorageSync("uni_id_token")||N.getStorageSync("uniIdToken"),tokenExpired:N.getStorageSync("uni_id_token_expired")}}function Zt({token:n,tokenExpired:e}={}){n&&N.setStorageSync("uni_id_token",n),e&&N.setStorageSync("uni_id_token_expired",e)}var yi=class extends zt{getAccessToken(){return new Promise((n,e)=>{let t="Anonymous_Access_token";this.setAccessToken(t),n(t)})}setupRequest(n,e){let t=Object.assign({},n,{spaceId:this.config.spaceId,timestamp:Date.now()}),i={"Content-Type":"application/json"};e!=="auth"&&(t.token=this.accessToken,i["x-basement-token"]=this.accessToken),i["x-serverless-sign"]=Te.sign(t,this.config.clientSecret);let o=Kt();i["x-client-info"]=JSON.stringify(o);let{token:s}=Re();return i["x-client-token"]=s,{url:this.config.requestUrl,method:"POST",data:t,dataType:"json",header:JSON.parse(JSON.stringify(i))}}uploadFileToOSS({url:n,formData:e,name:t,filePath:i,fileType:o,onUploadProgress:s}){return new Promise((a,c)=>{let l=this.adapter.uploadFile({url:n,formData:e,name:t,filePath:i,fileType:o,success(r){r&&r.statusCode<400?a(r):c(new C({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))},fail(r){c(new C({code:r.code||"UPLOAD_FAILED",message:r.message||r.errMsg||"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}});typeof s=="function"&&l&&typeof l.onProgressUpdate=="function"&&l.onProgressUpdate(r=>{s({loaded:r.totalBytesSent,total:r.totalBytesExpectedToSend})})})}uploadFile({filePath:n,cloudPath:e,fileType:t="image",onUploadProgress:i}){if(!e)throw new C({code:"CLOUDPATH_REQUIRED",message:"cloudPath\u4E0D\u53EF\u4E3A\u7A7A"});let o;return this.getOSSUploadOptionsFromPath({cloudPath:e}).then(s=>{let{url:a,formData:c,name:l}=s.result;o=s.result.fileUrl;let r={url:a,formData:c,name:l,filePath:n,fileType:t};return this.uploadFileToOSS(Object.assign({},r,{onUploadProgress:i}))}).then(()=>this.reportOSSUpload({cloudPath:e})).then(s=>new Promise((a,c)=>{s.success?a({success:!0,filePath:n,fileID:o}):c(new C({code:"UPLOAD_FAILED",message:"\u6587\u4EF6\u4E0A\u4F20\u5931\u8D25"}))}))}deleteFile({fileList:n}){let e={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:n})};return this.request(this.setupRequest(e))}getTempFileURL({fileList:n}={}){let e={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:n})};return this.request(this.setupRequest(e))}},wi={init(n){let e=new yi(n),t={signInAnonymously:function(){return e.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return e.auth=function(){return t},e.customAuth=e.auth,e}};function bi({data:n}){let e;e=Kt();let t=JSON.parse(JSON.stringify(n||{}));if(Object.assign(t,{clientInfo:e}),!t.uniIdToken){let{token:i}=Re();i&&(t.uniIdToken=i)}return t}var Ai=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"\uFF0C\u4E91\u51FD\u6570[{functionName}]\u5728\u4E91\u7AEF\u4E0D\u5B58\u5728\uFF0C\u8BF7\u68C0\u67E5\u6B64\u4E91\u51FD\u6570\u540D\u79F0\u662F\u5426\u6B63\u786E\u4EE5\u53CA\u8BE5\u4E91\u51FD\u6570\u662F\u5426\u5DF2\u4E0A\u4F20\u5230\u670D\u52A1\u7A7A\u95F4",mode:"append"}],en=/[\\^$.*+?()[\]{}|]/g,vi=RegExp(en.source);function Et(n,e,t){return n.replace(new RegExp((i=e)&&vi.test(i)?i.replace(en,"\\$&"):i,"g"),t);var i}function Tt({functionName:n,result:e,logPvd:t}){if(this.config.useDebugFunction&&e&&e.requestId){let i=JSON.stringify({spaceId:this.config.spaceId,functionName:n,requestId:e.requestId});console.log(`[${t}-request]${i}[/${t}-request]`)}}function ki(n){let e=n.callFunction,t=function(i){let o=i.name;i.data=bi.call(n,{data:i.data});let s={aliyun:"aliyun",tencent:"tcb",tcb:"tcb"}[this.config.provider];return e.call(this,i).then(a=>(a.errCode=0,Tt.call(this,{functionName:o,result:a,logPvd:s}),Promise.resolve(a)),a=>(Tt.call(this,{functionName:o,result:a,logPvd:s}),a&&a.message&&(a.message=function({message:c="",extraInfo:l={},formatter:r=[]}={}){for(let f=0;f<r.length;f++){let{rule:w,content:A,mode:v}=r[f],E=c.match(w);if(!E)continue;let m=A;for(let u=1;u<E.length;u++)m=Et(m,`{$${u}}`,E[u]);for(let u in l)m=Et(m,`{${u}}`,l[u]);return v==="replace"?m:c+m}return c}({message:`[${i.name}]: ${a.message}`,formatter:Ai,extraInfo:{functionName:o}})),Promise.reject(a)))};n.callFunction=function(i){let o;return o=t.call(this,i),Object.defineProperty(o,"result",{get:()=>(console.warn("\u5F53\u524D\u8FD4\u56DE\u7ED3\u679C\u4E3APromise\u7C7B\u578B\uFF0C\u4E0D\u53EF\u76F4\u63A5\u8BBF\u95EE\u5176result\u5C5E\u6027\uFF0C\u8BE6\u60C5\u8BF7\u53C2\u8003\uFF1Ahttps://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{})}),o}}var tn=Symbol("CLIENT_DB_INTERNAL");function Le(n,e){return n.then="DoNotReturnProxyWithAFunctionNamedThen",n._internalType=tn,n.__v_raw=void 0,new Proxy(n,{get(t,i,o){if(i==="_uniClient")return null;if(i in t||typeof i!="string"){let s=t[i];return typeof s=="function"?s.bind(t):s}return e.get(t,i,o)}})}function Ct(n){return{on:(e,t)=>{n[e]=n[e]||[],n[e].indexOf(t)>-1||n[e].push(t)},off:(e,t)=>{n[e]=n[e]||[];let i=n[e].indexOf(t);i!==-1&&n[e].splice(i,1)}}}var Fi=["db.Geo","db.command","command.aggregate"];function nn(n,e){return Fi.indexOf(`${n}.${e}`)>-1}function Y(n){switch(st(n=Xt(n))){case"array":return n.map(e=>Y(e));case"object":return n._internalType===tn||Object.keys(n).forEach(e=>{n[e]=Y(n[e])}),n;case"regexp":return{$regexp:{source:n.source,flags:n.flags}};case"date":return{$date:n.toISOString()};default:return n}}var nt=class{constructor(e,t,i){this.content=e,this.prevStage=t||null,this.udb=null,this._database=i}toJSON(){let e=this,t=[e.content];for(;e.prevStage;)e=e.prevStage,t.push(e.content);return{$db:t.reverse().map(i=>({$method:i.$method,$param:Y(i.$param)}))}}getAction(){let e=this.toJSON().$db.find(t=>t.$method==="action");return e&&e.$param&&e.$param[0]}getCommand(){return{$db:this.toJSON().$db.filter(e=>e.$method!=="action")}}get useAggregate(){let e=this,t=!1;for(;e.prevStage;){e=e.prevStage;let i=e.content.$method;if(i==="aggregate"||i==="pipeline"){t=!0;break}}return t}get count(){if(!this.useAggregate)return function(){return this._send("count",Array.from(arguments))};let e=this;return function(){return ue({$method:"count",$param:Y(Array.from(arguments))},e,this._database)}}get(){return this._send("get",Array.from(arguments))}add(){return this._send("add",Array.from(arguments))}remove(){return this._send("remove",Array.from(arguments))}update(){return this._send("update",Array.from(arguments))}end(){return this._send("end",Array.from(arguments))}set(){throw new Error("clientDB\u7981\u6B62\u4F7F\u7528set\u65B9\u6CD5")}_send(e,t){let i=this.getAction(),o=this.getCommand();return o.$db.push({$method:e,$param:Y(t)}),this._database._callCloudFunction({action:i,command:o})}};function ue(n,e,t){return Le(new nt(n,e,t),{get(i,o){let s="db";return i&&i.content&&(s=i.content.$method),nn(s,o)?ue({$method:o},i,t):function(){return ue({$method:o,$param:Y(Array.from(arguments))},i,t)}}})}function We({path:n,method:e}){return class{constructor(){this.param=Array.from(arguments)}toJSON(){return{$newDb:[...n.map(t=>({$method:t})),{$method:e,$param:this.param}]}}}}var it=class extends class{constructor({uniClient:e={}}={}){this._uniClient=e,this._authCallBacks={},this._dbCallBacks={},e.isDefault&&(this._dbCallBacks=re("_globalUniCloudDatabaseCallback")),this.auth=Ct(this._authCallBacks),Object.assign(this,Ct(this._dbCallBacks)),this.env=Le({},{get:(t,i)=>({$env:i})}),this.Geo=Le({},{get:(t,i)=>We({path:["Geo"],method:i})}),this.serverDate=We({path:[],method:"serverDate"}),this.RegExp=We({path:[],method:"RegExp"})}getCloudEnv(e){if(typeof e!="string"||!e.trim())throw new Error("getCloudEnv\u53C2\u6570\u9519\u8BEF");return{$env:e.replace("$cloudEnv_","")}}_callback(e,t){let i=this._dbCallBacks;i[e]&&i[e].forEach(o=>{o(...t)})}_callbackAuth(e,t){let i=this._authCallBacks;i[e]&&i[e].forEach(o=>{o(...t)})}multiSend(){let e=Array.from(arguments),t=e.map(i=>{let o=i.getAction(),s=i.getCommand();if(s.$db[s.$db.length-1].$method!=="getTemp")throw new Error("multiSend\u53EA\u652F\u6301\u5B50\u547D\u4EE4\u5185\u4F7F\u7528getTemp");return{action:o,command:s}});return this._callCloudFunction({multiCommand:t,queryList:e})}}{_callCloudFunction({action:e,command:t,multiCommand:i,queryList:o}){function s(f,w){if(i&&o)for(let A=0;A<o.length;A++){let v=o[A];v.udb&&typeof v.udb.setResult=="function"&&(w?v.udb.setResult(w):v.udb.setResult(f.result.dataList[A]))}}let a=this;function c(f){return a._callback("error",[f]),j(M("database","fail"),f).then(()=>j(M("database","complete"),f)).then(()=>(s(null,f),U(K,{type:pt,content:f}),Promise.reject(f)))}let l=j(M("database","invoke")),r=this._uniClient;return l.then(()=>r.callFunction({name:"DCloud-clientDB",type:Jn,data:{action:e,command:t,multiCommand:i}})).then(f=>{let{code:w,message:A,token:v,tokenExpired:E,systemInfo:m=[]}=f.result;if(m)for(let h=0;h<m.length;h++){let{level:F,message:k,detail:b}=m[h],S=console[F]||console.log,T="[System Info]"+k;b&&(T=`${T}
\u8BE6\u7EC6\u4FE1\u606F\uFF1A${b}`),S(T)}if(w)return c(new C({code:w,message:A,requestId:f.requestId}));f.result.errCode=f.result.code,f.result.errMsg=f.result.message,v&&E&&(Zt({token:v,tokenExpired:E}),this._callbackAuth("refreshToken",[{token:v,tokenExpired:E}]),this._callback("refreshToken",[{token:v,tokenExpired:E}]),U(Ce,{token:v,tokenExpired:E}));let u=[{prop:"affectedDocs",tips:"affectedDocs\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528inserted/deleted/updated/data.length\u66FF\u4EE3"},{prop:"code",tips:"code\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528errCode\u66FF\u4EE3"},{prop:"message",tips:"message\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\uFF0C\u8BF7\u4F7F\u7528errMsg\u66FF\u4EE3"}];for(let h=0;h<u.length;h++){let{prop:F,tips:k}=u[h];if(F in f.result){let b=f.result[F];Object.defineProperty(f.result,F,{get:()=>(console.warn(k),b)})}}return function(h){return j(M("database","success"),h).then(()=>j(M("database","complete"),h)).then(()=>(s(h,null),U(K,{type:pt,content:h}),Promise.resolve(h)))}(f)},f=>(/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(f.message)&&console.warn("clientDB\u672A\u521D\u59CB\u5316\uFF0C\u8BF7\u5728web\u63A7\u5236\u53F0\u4FDD\u5B58\u4E00\u6B21schema\u4EE5\u5F00\u542FclientDB"),c(new C({code:f.code||"SYSTEM_ERROR",message:f.message,requestId:f.requestId}))))}};function Si(n){n.database=function(e){if(e&&Object.keys(e).length>0)return n.init(e).database();if(this._database)return this._database;let t=function(i,o={}){return Le(new i(o),{get:(s,a)=>nn("db",a)?ue({$method:a},null,s):function(){return ue({$method:a,$param:Y(Array.from(arguments))},null,s)}})}(it,{uniClient:n});return this._database=t,t}}var J="token\u65E0\u6548\uFF0C\u8DF3\u8F6C\u767B\u5F55\u9875\u9762",on="token\u8FC7\u671F\uFF0C\u8DF3\u8F6C\u767B\u5F55\u9875\u9762",Ei={TOKEN_INVALID_TOKEN_EXPIRED:on,TOKEN_INVALID_INVALID_CLIENTID:J,TOKEN_INVALID:J,TOKEN_INVALID_WRONG_TOKEN:J,TOKEN_INVALID_ANONYMOUS_USER:J},ot={"uni-id-token-expired":on,"uni-id-check-token-failed":J,"uni-id-token-not-exist":J,"uni-id-check-device-feature-failed":J};function It(n,e){let t="";return t=n?`${n}/${e}`:e,t.replace(/^\//,"")}function Dt(n=[],e=""){let t=[],i=[];return n.forEach(o=>{o.needLogin===!0?t.push(It(e,o.path)):o.needLogin===!1&&i.push(It(e,o.path))}),{needLoginPage:t,notNeedLoginPage:i}}var Ti=!!Bt.uniIdRouter,{loginPage:Be,routerNeedLogin:Ci,resToLogin:Ii,needLoginPage:Di,notNeedLoginPage:xi}=function({pages:n=[],subPackages:e=[],uniIdRouter:t={}}=Bt){let{loginPage:i,needLogin:o=[],resToLogin:s=!0}=t,{needLoginPage:a,notNeedLoginPage:c}=Dt(n),{needLoginPage:l,notNeedLoginPage:r}=function(f=[]){let w=[],A=[];return f.forEach(v=>{let{root:E,pages:m=[]}=v,{needLoginPage:u,notNeedLoginPage:h}=Dt(m,E);w.push(...u),A.push(...h)}),{needLoginPage:w,notNeedLoginPage:A}}(e);return{loginPage:i,routerNeedLogin:o,resToLogin:s,needLoginPage:[...a,...l],notNeedLoginPage:[...c,...r]}}();function Pi(n){let e=function(t){let i=getCurrentPages(),o=i[i.length-1].route,s=t.charAt(0),a=t.split("?")[0];if(s==="/")return a;let c=a.replace(/^\//,"").split("/"),l=o.split("/");l.pop();for(let r=0;r<c.length;r++){let f=c[r];f===".."?l.pop():f!=="."&&l.push(f)}return l[0]===""&&l.shift(),l.join("/")}(n).replace(/^\//,"");return!(xi.indexOf(e)>-1)&&(Di.indexOf(e)>-1||Ci.some(t=>function(i,o){return new RegExp(o).test(i)}(n,t)))}function sn(n,e){return n.charAt(0)!=="/"&&(n="/"+n),e?n.indexOf("?")>-1?n+`&uniIdRedirectUrl=${encodeURIComponent(e)}`:n+`?uniIdRedirectUrl=${encodeURIComponent(e)}`:n}function Oi(){let n=["navigateTo","redirectTo","reLaunch","switchTab"];for(let e=0;e<n.length;e++){let t=n[e];uni.addInterceptor(t,{invoke(i){let{token:o,tokenExpired:s}=Re(),a;if(o){if(s<Date.now()){let c="uni-id-token-expired";a={errCode:c,errMsg:ot[c]}}}else{let c="uni-id-check-token-failed";a={errCode:c,errMsg:ot[c]}}if(Pi(i.url)&&a){if(a.uniIdRedirectUrl=i.url,le(Z).length>0)return setTimeout(()=>{U(Z,a)},0),i.url="",!1;if(!Be)return i;i.url=sn(Be,a.uniIdRedirectUrl)}return i}})}}function Li(){this.onResponse(n=>{let{type:e,content:t}=n,i=!1;switch(e){case"cloudobject":i=function(o){let{errCode:s}=o;return s in ot}(t);break;case"clientdb":i=function(o){let{errCode:s}=o;return s in Ei}(t)}i&&function(o={}){let s=le(Z),a=getCurrentPages(),c=a[a.length-1],l=c&&c.$page&&c.$page.fullPath;if(s.length>0)return U(Z,Object.assign({uniIdRedirectUrl:l},o));Be&&uni.navigateTo({url:sn(Be,l)})}(t)})}function Bi(n){n.onNeedLogin=function(e){Je(Z,e)},n.offNeedLogin=function(e){Ye(Z,e)},Ti&&(re("uni-cloud-status").needLoginInit||(re("uni-cloud-status").needLoginInit=!0,function e(){let t=getCurrentPages();t&&t[0]?Oi.call(n):setTimeout(()=>{e()},30)}(),Ii&&Li.call(n)))}function Ri(n){(function(e){e.onResponse=function(t){Je(K,t)},e.offResponse=function(t){Ye(K,t)}})(n),Bi(n),function(e){e.onRefreshToken=function(t){Je(Ce,t)},e.offRefreshToken=function(t){Ye(Ce,t)}}(n)}var an,Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ui=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function Ni(){let n=Re().token||"",e=n.split(".");if(!n||e.length!==3)return{uid:null,role:[],permission:[],tokenExpired:0};let t;try{t=JSON.parse((i=e[1],decodeURIComponent(an(i).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(o){throw new Error("\u83B7\u53D6\u5F53\u524D\u7528\u6237\u4FE1\u606F\u51FA\u9519\uFF0C\u8BE6\u7EC6\u9519\u8BEF\u4FE1\u606F\u4E3A\uFF1A"+o.message)}var i;return t.tokenExpired=1e3*t.exp,delete t.exp,delete t.iat,t}an=typeof atob!="function"?function(n){if(n=String(n).replace(/[\t\n\f\r ]+/g,""),!Ui.test(n))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var e;n+="==".slice(2-(3&n.length));for(var t,i,o="",s=0;s<n.length;)e=Ee.indexOf(n.charAt(s++))<<18|Ee.indexOf(n.charAt(s++))<<12|(t=Ee.indexOf(n.charAt(s++)))<<6|(i=Ee.indexOf(n.charAt(s++))),o+=t===64?String.fromCharCode(e>>16&255):i===64?String.fromCharCode(e>>16&255,e>>8&255):String.fromCharCode(e>>16&255,e>>8&255,255&e);return o}:atob;var qi=ie(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});let t="chooseAndUploadFile:ok",i="chooseAndUploadFile:fail";function o(a,c){return a.tempFiles.forEach((l,r)=>{l.name||(l.name=l.path.substring(l.path.lastIndexOf("/")+1)),c&&(l.fileType=c),l.cloudPath=Date.now()+"_"+r+l.name.substring(l.name.lastIndexOf("."))}),a.tempFilePaths||(a.tempFilePaths=a.tempFiles.map(l=>l.path)),a}function s(a,c,{onChooseFile:l,onUploadProgress:r}){return c.then(f=>{if(l){let w=l(f);if(w!==void 0)return Promise.resolve(w).then(A=>A===void 0?f:A)}return f}).then(f=>f===!1?{errMsg:t,tempFilePaths:[],tempFiles:[]}:function(w,A,v=5,E){(A=Object.assign({},A)).errMsg=t;let m=A.tempFiles,u=m.length,h=0;return new Promise(F=>{for(;h<v;)k();function k(){let b=h++;if(b>=u)return void(!m.find(T=>!T.url&&!T.errMsg)&&F(A));let S=m[b];w.uploadFile({filePath:S.path,cloudPath:S.cloudPath,fileType:S.fileType,onUploadProgress(T){T.index=b,T.tempFile=S,T.tempFilePath=S.path,E&&E(T)}}).then(T=>{S.url=T.fileID,b<u&&k()}).catch(T=>{S.errMsg=T.errMsg||T.message,b<u&&k()})}})}(a,f,5,r))}e.initChooseAndUploadFile=function(a){return function(c={type:"all"}){return c.type==="image"?s(a,function(l){let{count:r,sizeType:f,sourceType:w=["album","camera"],extension:A}=l;return new Promise((v,E)=>{uni.chooseImage({count:r,sizeType:f,sourceType:w,extension:A,success(m){v(o(m,"image"))},fail(m){E({errMsg:m.errMsg.replace("chooseImage:fail",i)})}})})}(c),c):c.type==="video"?s(a,function(l){let{camera:r,compressed:f,maxDuration:w,sourceType:A=["album","camera"],extension:v}=l;return new Promise((E,m)=>{uni.chooseVideo({camera:r,compressed:f,maxDuration:w,sourceType:A,extension:v,success(u){let{tempFilePath:h,duration:F,size:k,height:b,width:S}=u;E(o({errMsg:"chooseVideo:ok",tempFilePaths:[h],tempFiles:[{name:u.tempFile&&u.tempFile.name||"",path:h,size:k,type:u.tempFile&&u.tempFile.type||"",width:S,height:b,duration:F,fileType:"video",cloudPath:""}]},"video"))},fail(u){m({errMsg:u.errMsg.replace("chooseVideo:fail",i)})}})})}(c),c):s(a,function(l){let{count:r,extension:f}=l;return new Promise((w,A)=>{let v=uni.chooseFile;if(typeof wx!="undefined"&&typeof wx.chooseMessageFile=="function"&&(v=wx.chooseMessageFile),typeof v!="function")return A({errMsg:i+" \u8BF7\u6307\u5B9A type \u7C7B\u578B\uFF0C\u8BE5\u5E73\u53F0\u4EC5\u652F\u6301\u9009\u62E9 image \u6216 video\u3002"});v({type:"all",count:r,extension:f,success(E){w(o(E))},fail(E){A({errMsg:E.errMsg.replace("chooseFile:fail",i)})}})})}(c),c)}}}),ji=Wn(qi),Mi="manual";function rn(n){return{props:{localdata:{type:Array,default:()=>[]},options:{type:[Object,Array],default:()=>({})},spaceInfo:{type:Object,default:()=>({})},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:()=>({mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{}}),created(){this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch(()=>{var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach(t=>{e.push(this[t])}),e},(e,t)=>{if(this.loadtime===Mi)return;let i=!1,o=[];for(let s=2;s<e.length;s++)e[s]!==t[s]&&(o.push(e[s]),i=!0);e[0]!==t[0]&&(this.mixinDatacomPage.current=this.pageCurrent),this.mixinDatacomPage.size=this.pageSize,this.onMixinDatacomPropsChange(i,o)})},methods:{onMixinDatacomPropsChange(e,t){},mixinDatacomEasyGet({getone:e=!1,success:t,fail:i}={}){this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomGet().then(o=>{this.mixinDatacomLoading=!1;let{data:s,count:a}=o.result;this.getcount&&(this.mixinDatacomPage.count=a),this.mixinDatacomHasMore=s.length<this.pageSize;let c=e?s.length?s[0]:void 0:s;this.mixinDatacomResData=c,t&&t(c)}).catch(o=>{this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=o,i&&i(o)}))},mixinDatacomGet(e={}){let t=n.database(this.spaceInfo),i=e.action||this.action;i&&(t=t.action(i));let o=e.collection||this.collection;t=Array.isArray(o)?t.collection(...o):t.collection(o);let s=e.where||this.where;s&&Object.keys(s).length&&(t=t.where(s));let a=e.field||this.field;a&&(t=t.field(a));let c=e.foreignKey||this.foreignKey;c&&(t=t.foreignKey(c));let l=e.groupby||this.groupby;l&&(t=t.groupBy(l));let r=e.groupField||this.groupField;r&&(t=t.groupField(r)),(e.distinct!==void 0?e.distinct:this.distinct)===!0&&(t=t.distinct());let f=e.orderby||this.orderby;f&&(t=t.orderBy(f));let w=e.pageCurrent!==void 0?e.pageCurrent:this.mixinDatacomPage.current,A=e.pageSize!==void 0?e.pageSize:this.mixinDatacomPage.size,v=e.getcount!==void 0?e.getcount:this.getcount,E=e.gettree!==void 0?e.gettree:this.gettree,m=e.gettreepath!==void 0?e.gettreepath:this.gettreepath,u={getCount:v},h={limitLevel:e.limitlevel!==void 0?e.limitlevel:this.limitlevel,startWith:e.startwith!==void 0?e.startwith:this.startwith};return E&&(u.getTree=h),m&&(u.getTreePath=h),t=t.skip(A*(w-1)).limit(A).get(u),t}}}}function $i(n){return function(e,t={}){t=function(c,l={}){return c.customUI=l.customUI||c.customUI,Object.assign(c.loadingOptions,l.loadingOptions),Object.assign(c.errorOptions,l.errorOptions),c}({customUI:!1,loadingOptions:{title:"\u52A0\u8F7D\u4E2D...",mask:!0},errorOptions:{type:"modal",retry:!1}},t);let{customUI:i,loadingOptions:o,errorOptions:s}=t,a=!i;return new Proxy({},{get:(c,l)=>function r(...f){return I(this,null,function*(){let w;a&&uni.showLoading({title:o.title,mask:o.mask});try{w=yield n.callFunction({name:e,type:Vn,data:{method:l,params:f}})}catch(m){w={result:m}}let{errCode:A,errMsg:v,newToken:E}=w.result||{};if(a&&uni.hideLoading(),E&&E.token&&E.tokenExpired&&(Zt(E),U(Ce,O({},E))),A){if(a)if(s.type==="toast")uni.showToast({title:v,icon:"none"});else{if(s.type!=="modal")throw new Error(`Invalid errorOptions.type: ${s.type}`);{let{confirm:u}=yield function(){return I(this,arguments,function*({title:h,content:F,showCancel:k,cancelText:b,confirmText:S}={}){return new Promise((T,x)=>{uni.showModal({title:h,content:F,showCancel:k,cancelText:b,confirmText:S,success(D){T(D)},fail(){T({confirm:!1,cancel:!0})}})})})}({title:"\u63D0\u793A",content:v,showCancel:s.retry,cancelText:"\u53D6\u6D88",confirmText:s.retry?"\u91CD\u8BD5":"\u786E\u5B9A"});if(s.retry&&u)return r(...f)}}let m=new C({code:A,message:v,requestId:w.requestId});throw m.detail=w.result,U(K,{type:_t,content:m}),m}return U(K,{type:_t,content:w.result}),w.result})}})}}function xt(n){if(n.initUniCloudStatus&&n.initUniCloudStatus!=="rejected")return;let e=Promise.resolve();var t;t=1,e=new Promise((o,s)=>{setTimeout(()=>{o()},t)}),n.isReady=!1,n.isDefault=!1;let i=n.auth();n.initUniCloudStatus="pending",n.initUniCloud=e.then(()=>i.getLoginState()).then(o=>o?Promise.resolve():i.signInAnonymously()).then(()=>Promise.resolve()).then(({address:o,port:s}={})=>Promise.resolve()).then(()=>{n.isReady=!0,n.initUniCloudStatus="fulfilled"}).catch(o=>{console.error(o),n.initUniCloudStatus="rejected"})}var q=new class{init(n){let e={},t=n.debugFunction!==!1&&Nt&&qt==="app-plus";switch(n.provider){case"tcb":case"tencent":e=_i.init(Object.assign(n,{useDebugFunction:t}));break;case"aliyun":e=ei.init(Object.assign(n,{useDebugFunction:t}));break;case"private":e=wi.init(Object.assign(n,{useDebugFunction:t}));break;default:throw new Error("\u672A\u63D0\u4F9B\u6B63\u786E\u7684provider\u53C2\u6570")}return xt(e),e.reInit=function(){xt(this)},ki(e),function(i){let o=i.uploadFile;i.uploadFile=function(s){return o.call(this,s)}}(e),Si(e),function(i){i.getCurrentUserInfo=Ni,i.chooseAndUploadFile=ji.initChooseAndUploadFile(i),Object.assign(i,{get mixinDatacom(){return rn(i)}}),i.importObject=$i(i)}(e),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach(i=>{if(!e[i])return;let o=e[i];e[i]=function(){return e.reInit(),o.apply(e,Array.from(arguments))},e[i]=$t(e[i],i).bind(e)}),e.init=this.init,e}};(()=>{{let n=Yn,e={};if(n.length===1)e=n[0],q=q.init(e),q.isDefault=!0;else{let t=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","database","getCurrentUSerInfo","importObject"],i;i=n&&n.length>0?"\u5E94\u7528\u6709\u591A\u4E2A\u670D\u52A1\u7A7A\u95F4\uFF0C\u8BF7\u901A\u8FC7uniCloud.init\u65B9\u6CD5\u6307\u5B9A\u8981\u4F7F\u7528\u7684\u670D\u52A1\u7A7A\u95F4":"\u5E94\u7528\u672A\u5173\u8054\u670D\u52A1\u7A7A\u95F4\uFF0C\u8BF7\u5728uniCloud\u76EE\u5F55\u53F3\u952E\u5173\u8054\u670D\u52A1\u7A7A\u95F4",t.forEach(o=>{q[o]=function(){return console.error(i),Promise.reject(new C({code:"SYS_ERR",message:i}))}})}Object.assign(q,{get mixinDatacom(){return rn(q)}}),Ri(q),q.addInterceptor=Gn,q.removeInterceptor=Qn}})();var Q=q;var d=_n(un());var ne=(n,e)=>{let t=n.__vccOpts||n;for(let[i,o]of e)t[i]=o;return t};var Ki={id:"2852637",name:"uniui\u56FE\u6807\u5E93",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]},zi="/uni_modules/uni-icons/components/uni-icons/uniicons.ttf",Wi={"uni-icons":{"":{fontFamily:"uniicons",textDecoration:"none",textAlign:"center"}}},Hi=n=>typeof n=="number"||/^[0-9]*$/g.test(n)?n+"px":n,Vi=weex.requireModule("dom");Vi.addRule("fontFace",{fontFamily:"uniicons",src:"url('"+zi+"')"});var Ji={name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data(){return{icons:Ki.glyphs}},computed:{unicode(){let n=this.icons.find(e=>e.font_class===this.type);return n?unescape(`%u${n.unicode}`):""},iconSize(){return Hi(this.size)}},methods:{_onClick(){this.$emit("click")}}};function Yi(n,e,t,i,o,s){return(0,d.openBlock)(),(0,d.createElementBlock)("u-text",{style:(0,d.normalizeStyle)({color:t.color,"font-size":s.iconSize}),class:"uni-icons",onClick:e[0]||(e[0]=(...a)=>s._onClick&&s._onClick(...a))},(0,d.toDisplayString)(s.unicode),5)}var Gi=ne(Ji,[["render",Yi],["styles",[Wi]]]);function Ue(n,e){return Pt(n)?e:n}var Qi={"uni-badge--x":{"":{position:"relative"}},"uni-badge--absolute":{"":{position:"absolute"}},"uni-badge--small":{"":{transform:"scale(0.8)",transformOrigin:"center center"}},"uni-badge":{"":{justifyContent:"center",flexDirection:"row",height:20,lineHeight:18,color:"#ffffff",borderRadius:100,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderStyle:"solid",borderColor:"#ffffff",textAlign:"center",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSize:12}},"uni-badge--info":{"":{color:"#ffffff",backgroundColor:"#909399"}},"uni-badge--primary":{"":{backgroundColor:"#2979ff"}},"uni-badge--success":{"":{backgroundColor:"#4cd964"}},"uni-badge--warning":{"":{backgroundColor:"#f0ad4e"}},"uni-badge--error":{"":{backgroundColor:"#dd524d"}},"uni-badge--inverted":{"":{paddingTop:0,paddingRight:5,paddingBottom:0,paddingLeft:0,color:"#909399"}},"uni-badge--info-inverted":{"":{color:"#909399",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--primary-inverted":{"":{color:"#2979ff",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--success-inverted":{"":{color:"#4cd964",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--warning-inverted":{"":{color:"#f0ad4e",backgroundColor:"rgba(0,0,0,0)"}},"uni-badge--error-inverted":{"":{color:"#dd524d",backgroundColor:"rgba(0,0,0,0)"}}},Xi={name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default(){return[0,0]}},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default(){return{}}}},data(){return{}},computed:{width(){return String(this.text).length*8+12},classNames(){let{inverted:n,type:e,size:t,absolute:i}=this;return[n?"uni-badge--"+e+"-inverted":"","uni-badge--"+e,"uni-badge--"+t,i?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let n=this.width/2,e=10;this.isDot&&(n=5,e=5);let t=`${-n+this.offset[0]}px`,i=`${-e+this.offset[1]}px`,o={rightTop:{right:t,top:i},rightBottom:{right:t,bottom:i},leftBottom:{left:t,bottom:i},leftTop:{left:t,top:i}},s=o[this.absolute];return s||o.rightTop},badgeWidth(){return{width:`${this.width}px`}},dotStyle(){return this.isDot?{width:"10px",height:"10px",borderRadius:"10px"}:{}},displayValue(){let{isDot:n,text:e,maxNum:t}=this;return n?"":Number(e)>t?`${t}+`:e}},methods:{onClick(){this.$emit("click")}}};function Zi(n,e,t,i,o,s){return(0,d.openBlock)(),(0,d.createElementBlock)("view",{class:"uni-badge--x"},[(0,d.renderSlot)(n.$slots,"default"),t.text?((0,d.openBlock)(),(0,d.createElementBlock)("u-text",{key:0,class:(0,d.normalizeClass)([s.classNames,"uni-badge"]),style:(0,d.normalizeStyle)([s.badgeWidth,s.positionStyle,t.customStyle,s.dotStyle]),onClick:e[0]||(e[0]=a=>s.onClick())},(0,d.toDisplayString)(s.displayValue),7)):(0,d.createCommentVNode)("",!0)])}var eo=ne(Xi,[["render",Zi],["styles",[Qi]]]),to={"uni-list-item":{"":{fontSize:16,position:"relative",justifyContent:"space-between",alignItems:"center",backgroundColor:"#ffffff",flexDirection:"row"}},"uni-list-item--disabled":{"":{opacity:.3}},"uni-list-item--hover":{"":{backgroundColor:"#f1f1f1"}},"uni-list-item__container":{"":{position:"relative",flexDirection:"row",paddingTop:12,paddingRight:15,paddingBottom:12,paddingLeft:15,flex:1,overflow:"hidden"}},"container--right":{"":{paddingRight:0}},"uni-list--border":{"":{position:"absolute",top:0,right:0,left:0,borderTopColor:"#e5e5e5",borderTopStyle:"solid",borderTopWidth:.5}},"uni-list-item__content":{"":{paddingRight:8,flex:1,color:"#3b4144",flexDirection:"column",justifyContent:"space-between",overflow:"hidden"}},"uni-list-item__content--center":{"":{justifyContent:"center"}},"uni-list-item__content-title":{"":{fontSize:14,color:"#3b4144",overflow:"hidden"}},"uni-list-item__content-note":{"":{marginTop:"6rpx",color:"#999999",fontSize:12,overflow:"hidden"}},"uni-list-item__extra":{"":{flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}},"uni-list-item__header":{"":{flexDirection:"row",alignItems:"center"}},"uni-list-item__icon":{"":{marginRight:"18rpx",flexDirection:"row",justifyContent:"center",alignItems:"center"}},"uni-list-item__icon-img":{"":{height:26,width:26,marginRight:10}},"uni-icon-wrapper":{"":{alignItems:"center",paddingTop:0,paddingRight:10,paddingBottom:0,paddingLeft:10}},"flex--direction":{"":{flexDirection:"column"}},"uni-list--lg":{"":{height:40,width:40}},"uni-list--base":{"":{height:26,width:26}},"uni-list--sm":{"":{height:20,width:20}},"uni-list-item__extra-text":{"":{color:"#999999",fontSize:12}},"uni-ellipsis-1":{"":{lines:1,textOverflow:"ellipsis"}},"uni-ellipsis-2":{"":{lines:2,textOverflow:"ellipsis"}}},no={name:"UniListItem",emits:["click","switchChange"],props:{direction:{type:String,default:"row"},title:{type:String,default:""},note:{type:String,default:""},ellipsis:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},clickable:{type:Boolean,default:!1},showArrow:{type:[Boolean,String],default:!1},link:{type:[Boolean,String],default:!1},to:{type:String,default:""},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},badgeStyle:{type:Object,default(){return{}}},rightText:{type:String,default:""},thumb:{type:String,default:""},thumbSize:{type:String,default:"base"},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default(){return{type:"",color:"#000000",size:20}}},border:{type:Boolean,default:!0}},data(){return{isFirstChild:!1}},mounted(){this.list=this.getForm(),this.list&&(this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0))},methods:{getForm(n="uniList"){let e=this.$parent,t=e.$options.name;for(;t!==n;){if(e=e.$parent,!e)return!1;t=e.$options.name}return e},onClick(){if(this.to!==""){this.openPage();return}(this.clickable||this.link)&&this.$emit("click",{data:{}})},onSwitchChange(n){this.$emit("switchChange",n.detail)},openPage(){["navigateTo","redirectTo","reLaunch","switchTab"].indexOf(this.link)!==-1?this.pageApi(this.link):this.pageApi("navigateTo")},pageApi(n){let e={url:this.to,success:t=>{this.$emit("click",{data:t})},fail:t=>{this.$emit("click",{data:t})}};switch(n){case"navigateTo":uni.navigateTo(e);break;case"redirectTo":uni.redirectTo(e);break;case"reLaunch":uni.reLaunch(e);break;case"switchTab":uni.switchTab(e);break;default:uni.navigateTo(e)}}}};function io(n,e,t,i,o,s){let a=Ue((0,d.resolveDynamicComponent)("uni-icons"),Gi),c=Ue((0,d.resolveDynamicComponent)("uni-badge"),eo),l=(0,d.resolveComponent)("switch");return(0,d.openBlock)(),(0,d.createElementBlock)("cell",null,[(0,d.createElementVNode)("view",{class:(0,d.normalizeClass)([{"uni-list-item--disabled":t.disabled},"uni-list-item"]),hoverClass:!t.clickable&&!t.link||t.disabled||t.showSwitch?"":"uni-list-item--hover",onClick:e[0]||(e[0]=(...r)=>s.onClick&&s.onClick(...r))},[o.isFirstChild?(0,d.createCommentVNode)("",!0):((0,d.openBlock)(),(0,d.createElementBlock)("view",{key:0,class:(0,d.normalizeClass)(["border--left",{"uni-list--border":t.border}])},null,2)),(0,d.createElementVNode)("view",{class:(0,d.normalizeClass)(["uni-list-item__container",{"container--right":t.showArrow||t.link,"flex--direction":t.direction==="column"}])},[(0,d.renderSlot)(n.$slots,"header",{},()=>[(0,d.createElementVNode)("view",{class:"uni-list-item__header"},[t.thumb?((0,d.openBlock)(),(0,d.createElementBlock)("view",{key:0,class:"uni-list-item__icon"},[(0,d.createElementVNode)("u-image",{src:t.thumb,class:(0,d.normalizeClass)(["uni-list-item__icon-img",["uni-list--"+t.thumbSize]])},null,10,["src"])])):t.showExtraIcon?((0,d.openBlock)(),(0,d.createElementBlock)("view",{key:1,class:"uni-list-item__icon"},[(0,d.createVNode)(a,{color:t.extraIcon.color,size:t.extraIcon.size,type:t.extraIcon.type},null,8,["color","size","type"])])):(0,d.createCommentVNode)("",!0)])]),(0,d.renderSlot)(n.$slots,"body",{},()=>[(0,d.createElementVNode)("view",{class:(0,d.normalizeClass)(["uni-list-item__content",{"uni-list-item__content--center":t.thumb||t.showExtraIcon||t.showBadge||t.showSwitch}])},[t.title?((0,d.openBlock)(),(0,d.createElementBlock)("u-text",{key:0,class:(0,d.normalizeClass)(["uni-list-item__content-title",[t.ellipsis!==0&&t.ellipsis<=2?"uni-ellipsis-"+t.ellipsis:""]])},(0,d.toDisplayString)(t.title),3)):(0,d.createCommentVNode)("",!0),t.note?((0,d.openBlock)(),(0,d.createElementBlock)("u-text",{key:1,class:"uni-list-item__content-note"},(0,d.toDisplayString)(t.note),1)):(0,d.createCommentVNode)("",!0)],2)]),(0,d.renderSlot)(n.$slots,"footer",{},()=>[t.rightText||t.showBadge||t.showSwitch?((0,d.openBlock)(),(0,d.createElementBlock)("view",{key:0,class:(0,d.normalizeClass)(["uni-list-item__extra",{"flex--justify":t.direction==="column"}])},[t.rightText?((0,d.openBlock)(),(0,d.createElementBlock)("u-text",{key:0,class:"uni-list-item__extra-text"},(0,d.toDisplayString)(t.rightText),1)):(0,d.createCommentVNode)("",!0),t.showBadge?((0,d.openBlock)(),(0,d.createBlock)(c,{key:1,type:t.badgeType,text:t.badgeText,"custom-style":t.badgeStyle},null,8,["type","text","custom-style"])):(0,d.createCommentVNode)("",!0),t.showSwitch?((0,d.openBlock)(),(0,d.createBlock)(l,{key:2,disabled:t.disabled,checked:t.switchChecked,onChange:s.onSwitchChange},null,8,["disabled","checked","onChange"])):(0,d.createCommentVNode)("",!0)],2)):(0,d.createCommentVNode)("",!0)])],2),t.showArrow||t.link?((0,d.openBlock)(),(0,d.createBlock)(a,{key:1,size:16,class:"uni-icon-wrapper",color:"#bbb",type:"arrowright"})):(0,d.createCommentVNode)("",!0)],10,["hoverClass"])])}var oo=ne(no,[["render",io],["styles",[to]]]),so={"uni-list":{"":{backgroundColor:"#ffffff",position:"relative",flexDirection:"column"}},"uni-list--border":{"":{position:"relative",borderTopColor:"#e5e5e5",borderTopStyle:"solid",borderTopWidth:.5,borderBottomColor:"#e5e5e5",borderBottomStyle:"solid",borderBottomWidth:.5,zIndex:-1}}},ao={name:"uniList","mp-weixin":{options:{multipleSlots:!1}},props:{enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},border:{type:Boolean,default:!0}},created(){this.firstChildAppend=!1},methods:{loadMore(n){this.$emit("scrolltolower")}}};function ro(n,e,t,i,o,s){return(0,d.openBlock)(),(0,d.createElementBlock)("list",{class:(0,d.normalizeClass)(["uni-list",{"uni-list--border":t.border}]),enableBackToTop:t.enableBackToTop,loadmoreoffset:"15"},[(0,d.renderSlot)(n.$slots,"default")],10,["enableBackToTop"])}var co=ne(ao,[["render",ro],["styles",[so]]]),uo=function(){var n=new Date,e=n.getFullYear(),t=n.getMonth()+1,i=n.getDate(),o=n.getHours(),s=n.getMinutes(),a=n.getSeconds(),c=e+"-"+t+"-"+i+" "+o+":"+s+":"+a;return c},lo=function(){let n=this;uni.getSystemInfo({success:function(e){n.deviceId=e.deviceId},fail:function(e){B("log","at common/getPosition.js:22",e)}}),B("log","at common/getPosition.js:25","\u672C\u673A\u8BBE\u5907ID\uFF1A"+this.deviceId),Q.callFunction({name:"readUserData",data:{deviceID:this.deviceId}}).then(e=>{var t=this.deviceId,i=e.result.data,o=i[0].deviceID;B("log","at common/getPosition.js:36","\u8BFB\u53D6\u8BBE\u5907ID\uFF1A"+o),t===o&&uni.getLocation({type:"gcj02",isHighAccuracy:!0,success:function(s){n.latitude=s.latitude,n.longitude=s.longitude,B("log","at common/getPosition.js:44","\u5F53\u524D\u7EAC\u5EA6\uFF1A"+n.latitude),B("log","at common/getPosition.js:45","\u5F53\u524D\u7ECF\u5EA6\uFF1A"+n.longitude),n.latitude!=null&&n.longitude!=null&&Q.callFunction({name:"insertPositionData",data:{deviceID:t,latitude:n.latitude,longitude:n.longitude,createTime:uo()}}).then(a=>{}).catch(a=>{B("log","at common/getPosition.js:59",a)})},fail:function(s){B("log","at common/getPosition.js:64",s)}})}).catch(e=>{uni.hideLoading(),uni.showModal({content:"\u8BF7\u5148\u6CE8\u518C",showCancel:!1})})},ho={position:lo},fo={content:{"":{flex:1}},scrollview:{"":{flex:1}},form:{"":{paddingTop:0,paddingRight:"100rpx",paddingBottom:0,paddingLeft:"100rpx",marginTop:100,marginBottom:100}},inputWrapper:{"":{width:230,height:50,backgroundColor:"#C0C0C0",borderRadius:20,paddingTop:0,paddingRight:20,paddingBottom:0,paddingLeft:20,marginTop:"30rpx",marginBottom:"30rpx",marginLeft:"30rpx",marginRight:"30rpx"}},input:{".inputWrapper ":{width:200,height:50,textAlign:"center",fontSize:15}},"uni-padding-wrap":{"":{marginTop:"30rpx",marginBottom:"30rpx",marginLeft:"30rpx",marginRight:"30rpx"}}},mo={data(){return{}},onLoad(){},methods:{switchChange:function(n){var e=n.value;if(e===!0)return timer=setInterval(ho.position,1e4),B("log","at pages/map/map.nvue:33","\u542F\u52A8\u5FAA\u73AF,\u5FAA\u73AFID: "+timer),timer;B("log","at pages/map/map.nvue:36","\u7ED3\u675F\u5FAA\u73AF,\u5FAA\u73AFID: "+timer),clearInterval(timer)},inputname:function(n){this.name=n.detail.value},getRemoteInfo(){this.name===null||this.name===""?(uni.hideLoading(),uni.showModal({content:"\u4E0D\u80FD\u4E3A\u7A7A",showCancel:!1})):Q.callFunction({name:"readUserData",data:{userName:this.name}}).then(n=>{var e=n.result.data;this.deviceID=e[0].deviceID,Q.callFunction({name:"readPositionData",data:{deviceID:this.deviceID}}).then(t=>{var i=t.result.data;let o=i[0].latitude,s=i[0].longitude;B("log","at pages/map/map.nvue:73","\u5F53\u524D\u7EAC\u5EA6\uFF1A"+o),B("log","at pages/map/map.nvue:74","\u5F53\u524D\u7ECF\u5EA6\uFF1A"+s),uni.openLocation({latitude:o,longitude:s,success:function(a){},fail:function(a){B("log","at pages/map/map.nvue:82",a)}})}).catch(t=>{B("log","at pages/map/map.nvue:86",t)})}).catch(n=>{uni.hideLoading(),uni.showModal({content:"\u65E0\u6B64\u7528\u6237",showCancel:!1})})},clearPosition(){this.name===null||this.name===""?(uni.hideLoading(),uni.showModal({content:"\u4E0D\u80FD\u4E3A\u7A7A",showCancel:!1})):Q.callFunction({name:"readUserData",data:{userName:this.name}}).then(n=>{var e=n.result.data;this.deviceID=e[0].deviceID,Q.callFunction({name:"clearPositionData",data:{deviceID:this.deviceID}}).then(t=>{t.result.deleted===0?(B("log","at pages/map/map.nvue:125",t.deleted),uni.hideLoading(),uni.showModal({content:"\u65E0\u6E05\u9664\u6570\u636E",showCancel:!1})):(uni.hideLoading(),uni.showModal({content:"\u6E05\u9664\u6210\u529F",showCancel:!1}))}).catch(t=>{uni.hideLoading(),uni.showModal({content:"\u6E05\u9664\u5931\u8D25",showCancel:!1})})}).catch(n=>{uni.hideLoading(),uni.showModal({content:"\u65E0\u6B64\u7528\u6237",showCancel:!1})})}}};function go(n,e,t,i,o,s){let a=Ue((0,d.resolveDynamicComponent)("uni-list-item"),oo),c=Ue((0,d.resolveDynamicComponent)("uni-list"),co),l=(0,d.resolveComponent)("button");return(0,d.openBlock)(),(0,d.createElementBlock)("scroll-view",{scrollY:!0,showScrollbar:!0,enableBackToTop:!0,bubble:"true",style:{flexDirection:"column"}},[(0,d.createElementVNode)("view",{class:"content"},[(0,d.createVNode)(c,{class:"scrollview"},{default:(0,d.withCtx)(()=>[(0,d.createVNode)(a,{"show-switch":!0,title:"\u6301\u7EED\u5B9A\u4F4D",onSwitchChange:s.switchChange},null,8,["onSwitchChange"])]),_:1})]),(0,d.createElementVNode)("view",{class:"form"},[(0,d.createElementVNode)("view",{class:"inputWrapper"},[(0,d.createElementVNode)("u-input",{class:"input",type:"text",onInput:e[0]||(e[0]=(...r)=>s.inputname&&s.inputname(...r)),value:"",placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0"},null,32)]),(0,d.createElementVNode)("view",{class:"uni-padding-wrap uni-common-mt"},[(0,d.createVNode)(l,{type:"primary",onClick:e[1]||(e[1]=r=>s.getRemoteInfo())},{default:(0,d.withCtx)(()=>[(0,d.createTextVNode)("\u67E5\u770B\u4F4D\u7F6E")]),_:1})]),(0,d.createElementVNode)("view",{class:"uni-padding-wrap uni-common-mt"},[(0,d.createVNode)(l,{type:"primary",onClick:e[2]||(e[2]=r=>s.clearPosition())},{default:(0,d.withCtx)(()=>[(0,d.createTextVNode)("\u6E05\u7A7A\u6570\u636E\u5E93")]),_:1})])])])}var Ne=ne(mo,[["render",go],["styles",[fo]]]);var ct=plus.webview.currentWebview();if(ct){let n=parseInt(ct.id),e="pages/map/map",t={};try{t=JSON.parse(ct.__query__)}catch(o){}Ne.mpType="page";let i=Vue.createPageApp(Ne,{$store:getApp({allowDefault:!0}).$store,__pageId:n,__pagePath:e,__pageQuery:t});i.provide("__globalStyles",Vue.useCssStyles([...__uniConfig.styles,...Ne.styles||[]])),i.mount("#root")}})();
